<div class="container"  *ngIf="hasViewPermission">
    <div class="comapny_section">



      <div class="header_section">

        <div class="row">
            <div class="col-md-4">
                <h1> Loan Approval Level</h1>
            </div>

            <div class="col-md-3">
                
                <!-- <input type="text" class="form-control mt-1" placeholder="Search by name " [(ngModel)]="searchQuery" (input)="filterEmployees()"> -->

            </div>

            <div class="col-md-5">
              <div class="button-group pull-right">
                  <button type="button" (click)="openPopus()" class="btn-Create btn btn-success " ><span class="header-btn-icon"><i class="fa-solid fa-circle-plus"></i>
                  </span> Create</button>
                  <span *ngIf="!hasAddPermission"></span>

                  <button type="button" class="btn-Edit btn-info btn"  (click)="EditShowButtons()" *ngIf="hasEditPermission">
                      <span class="header-btn-icon">
                       <mat-icon>draw
                  </mat-icon></span> Edit</button>
                  <span *ngIf="hasEditPermission"></span>

                  <button type="button" class="btn-Delete btn btn-danger" (click)="toggleCheckboxes()" *ngIf="hasDeletePermission">
                      <span class="header-btn-icon">
                          <mat-icon> delete
                     </mat-icon></span> {{ Delete ? 'Cancel' : 'Delete' }}</button>
                     
                     <span *ngIf="!hasDeletePermission"></span>
              </div>
          </div>

        </div>
       
       

    </div>

    <div class="row">
      <div class="col-md-2">
          
          <button  class=" mt-3 btn-danger btn " style="width: 100%;" color="warn" *ngIf="Delete" (click)="toggleSelectAllEmployees()">Select All</button>

      </div>
      <div class="col-md-3">
          <button class=" mt-3 btn-danger btn"  color="warn" *ngIf="Delete" (click)="deleteSelectedAssetType()">Delete Selected </button>

      </div>
  </div>
  
  

    <div *ngIf="iscreateLoanApp" class="modal">
        <div class="modal-content">
          <div class="row">
            <div class="col-md-10">
              <h2> Create Approval Level</h2>
            </div>
            <div class="col-md-2">
              <span class="close pull-right" (click)="closeapplicationModal()">&times;</span>
            </div>
          </div>
          <hr />
    
          <form (ngSubmit)="CreateLoanApproverLevel()" enctype="multipart/form-data">
            <div class="row">
              <div class="col-md-6">
                <label>Level</label>
                <input type="number" class="form-control" required [(ngModel)]="level" placeholder="Enter Level"
                       [ngModelOptions]="{standalone: true}" >
              </div>
          
              <div class="col-md-6">
                <label>Role</label>
                <input type="text" class="form-control" required [(ngModel)]="role" placeholder="Enter Role"
                       [ngModelOptions]="{standalone: true}">
              
              </div>

          
<!-- 
              <div class="col-md-6" >
                <label>Approver</label>
                <div class="custom-sel">
                  <select
                    class="form-control"
                    id="approver"
                    name="approver"
                    [(ngModel)]="approver"
                    [ngModelOptions]="{ standalone: true }"
                  >
                    <option *ngFor="let employees of Approvers" [value]="employees.id">
                      {{ employees.username }}
                    </option>
                  </select>
                </div>
              </div> -->


                              <!-- non-ess users  -->
                            <div class="col-md-6">
            <div class="custom-sel">
                <label>Approver</label>
                <select class="form-control" id="approver" required [(ngModel)]="approver"  [ngModelOptions]="{standalone: true}" [ngClass]="{'error-field': registerButtonClicked && !approver}" >
                    <option value="" >Select</option>
                    <option *ngFor="let deparmentsec of Users" [value]="deparmentsec.id">{{ deparmentsec.username     }} </option>
                </select>
                <div *ngIf="registerButtonClicked && !approver" class="error-message">Please Select approver  </div>
            </div>
        </div>
         
          
             

              <div class="col-md-6" >
                <label>Loan Type</label>
                <div class="custom-sel">
                  <select
                    class="form-control"
                    id="loan_type"
                    name="loan_type"
                    [(ngModel)]="loan_type"
                    [ngModelOptions]="{ standalone: true }"
                  >
                    <option *ngFor="let employees of LoanTypes" [value]="employees.id">
                      {{ employees.loan_type }}
                    </option>
                  </select>
                </div>
              </div>


            </div>
          
            <div class="row" *ngIf="hasAddPermission">
              <div class="col-md-8"></div>
              <div class="col-md-2">
                <button type="button" (click)="closeapplicationModal()" class="btn btn-danger btn-full mt-4">Close </button>
              </div>
              <div class="col-md-2">
                <button type="submit" class="btn btn-success btn-full mt-4">Add </button>
              </div>
            </div>
          </form>
          
        
        </div>
      </div>

                 <!-- Edit Modal -->
<div *ngIf="isEditModalOpen" class="modal">
<div class="modal-content">
<div class="row">
  <div class="col-md-10">
    <h2>Edit  Approval Level</h2>
  </div>
  <div class="col-md-2">
    <span class="close pull-right" (click)="closeEditModal()">&times;</span>
  </div>
</div>
<hr />

<form >
  <div class="row">
    <div class="col-md-6">
      <label>Level</label>
      <input type="number" class="form-control" required [(ngModel)]="editAsset.level" placeholder="Enter Level"
             [ngModelOptions]="{standalone: true}" >
    </div>

    <div class="col-md-6">
      <label>Role</label>
      <input type="text" class="form-control" required [(ngModel)]="editAsset.role" placeholder="Enter Role"
             [ngModelOptions]="{standalone: true}">
    
    </div>



    <div class="col-md-6" >
      <label>Approver</label>
      <div class="custom-sel">
        <select
          class="form-control"
          id="approver"
          name="approver"
          [(ngModel)]="editAsset.approver"
          [ngModelOptions]="{ standalone: true }"
        >
          <option *ngFor="let employees of Approvers" [value]="employees.id">
            {{ employees.username }}
          </option>
        </select>
      </div>
    </div>


   

    <div class="col-md-6" >
      <label>Loan Type</label>
      <div class="custom-sel">
        <select
          class="form-control"
          id="loan_type"
          name="loan_type"
          [(ngModel)]="editAsset.loan_type"
          [ngModelOptions]="{ standalone: true }"
        >
          <option *ngFor="let employees of LoanTypes" [value]="employees.id">
            {{ employees.loan_type }}
          </option>
        </select>
      </div>
    </div>


  </div>

  <div class="row" >
    <div class="col-md-8"></div>
    <div class="col-md-2">
      <button type="button" (click)="closeEditModal()"  class="btn btn-danger btn-full mt-4">Close</button>

    </div>
    <div class="col-md-2">
      <button type="button" (click)="updateAssetType()"  class="btn btn-success btn-full mt-4">Update</button>
    </div>
  </div>
</form>



</div>
</div>








     

            <div class="mt-4"  *ngIf="hasViewPermission">

                <table class="table-container " width="100%">
                    <thead>
                      <tr>
                        <th>No</th>
                        <th>Level</th>
                        <th>Role</th>
                        <th>Approver</th>

                        <th>Loan Type</th>
                       
                        <th>Action</th>

            
                       
                      </tr>
                    </thead>
                    <tbody>
                        
                      <tr *ngFor="let docs of approvalLevels;let i = index">
                        <td data-label="No">{{ i + 1 }}</td> 
                        <td data-label="Level">{{ docs.level }}</td>
                        <td data-label="Role">{{ docs.role }}</td> 
                        <td data-label="Approver">{{ docs.approver }}</td>
                        <td data-label="Loan Type">{{ docs.loan_type }}</td>

                        <td data-label="Action">
                          <button
                            mat-fab
                            color="primary"
                            aria-label="Edit icon"
                            *ngIf="showEditBtn"
          
                            
                            (click)="openEditModal(docs)"
                          >
                            <mat-icon style="color: white;">draw</mat-icon>
                          </button>
          
                          <mat-checkbox *ngIf="Delete" [(ngModel)]="docs.selected" ></mat-checkbox>
          
                        </td>
        
                      </tr>
                  
                    </tbody>
                  </table>
    
                  </div>

        </div>





</div>
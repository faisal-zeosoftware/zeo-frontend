<div class="container-fluid" *ngFor="let employeesec of employees">
  <div class="row">
    <!-- Sidebar Navigation -->
    <nav id="sidebar" class="col-md-3 col-lg-2 d-md-block bg-dark sidebar collapse">
      <div class="position-sticky pt-3">
        <div class="text-center mb-4">
          <div class="profile-pic-container position-relative">
            <img id="profile-pic" [src]="employeesec.emp_profile_pic" (error)="handleImageError($event)"
              alt="Profile Picture" class="img-fluid rounded-circle">
            <div class="upload-overlay position-absolute">
              <label for="profile-upload" class="upload-label">
                <i class="bi bi-camera-fill"></i>
              </label>
              <input type="file" id="profile-upload" accept="image/*" class="d-none">
            </div>
          </div>
          <h5 id="user-name" class="text-light mt-3">{{ employeesec.emp_first_name }} {{ employeesec.emp_last_name }}
          </h5>
          <p id="user-id" class="text-secondary small">Employee Code: {{ employeesec.emp_code }}</p>
        </div>

        <ul class="nav flex-column">
          <li class="nav-item" [class.active]="activeTabNav === 'dashboard'" (click)="selectTabNav('dashboard')">
            <a class="nav-link active" href="javascript:void(0)">
              <i class="bi bi-speedometer2 me-2"></i>
              <span>Dashboard</span>
            </a>
          </li>

                     <li class="nav-item" >
            <a class="nav-link d-flex justify-content-between align-items-center"
               href="javascript:void(0)"
               (click)="togglePunchingDropdown()">
              <div>
                <i class="bi bi-book me-2"></i>
                <span> Daily Punching</span>
              </div>
              <i [class]="isPunchingDropdownOpen ? 'bi bi-chevron-up' : 'bi bi-chevron-down'"></i>
            </a>
          
            <!-- Dropdown Items -->
            <ul *ngIf="isPunchingDropdownOpen" class="nav drop-nav-emp flex-column  mt-1">


              <li class="nav-item" [class.active]="activeTabNav === 'attendance'" (click)="selectTab('attendance')">
                <a class="nav-link" href="javascript:void(0)">
                  <i class="fa fa-paper-plane me-2"></i> Attendance
                </a>
              </li>

              <li class="nav-item" [class.active]="activeTabNav === 'punching'" (click)="selectTabNav('punching')">
                <a class="nav-link" href="javascript:void(0)">
                  <i class="fa fa-paper-plane me-2"></i> Attendance Marking
                </a>
              </li>
          
              <li class="nav-item" [class.active]="activeTabNav === 'recheckemp'" (click)="selectTabNav('recheckemp')">
                <a class="nav-link" href="javascript:void(0)">
                  <i class="fa fa-paper-plane me-2"></i> Recheck-In
                </a>
              </li>
            </ul>
          </li>

          <li class="nav-item" >
            <a class="nav-link d-flex justify-content-between align-items-center"
               href="javascript:void(0)"
               (click)="toggleRequestsDropdown()">
              <div>
                <i class="bi bi-book me-2"></i>
                <span>Requests</span>
              </div>
              <i [class]="isRequestsDropdownOpen ? 'bi bi-chevron-up' : 'bi bi-chevron-down'"></i>
            </a>
          
            <!-- Dropdown Items -->
            <ul *ngIf="isRequestsDropdownOpen" class="nav drop-nav-emp flex-column  mt-1">
              <li class="nav-item" [class.active]="activeTabNav === 'leaverequest'" (click)="selectTabNav('leaverequest')">
                <a class="nav-link" href="javascript:void(0)">
                  <i class="fa fa-paper-plane me-2"></i> Leave Request
                </a>
              </li>
          
              <li class="nav-item" [class.active]="activeTabNav === 'generalRequest'" (click)="selectTabNav('generalRequest')">
                <a class="nav-link" href="javascript:void(0)">
                  <i class="fa fa-paper-plane me-2"></i> General Request
                </a>
              </li>

              <li class="nav-item" [class.active]="activeTabNav === 'assetRequest'" (click)="selectTabNav('assetRequest')">
                <a class="nav-link" href="javascript:void(0)">
                  <i class="fa fa-paper-plane me-2"></i> Asset Request
                </a>
              </li>

               <li class="nav-item" [class.active]="activeTabNav === 'airticketRequest'" (click)="selectTabNav('airticketRequest')">
                <a class="nav-link" href="javascript:void(0)">
                  <i class="fa fa-paper-plane me-2"></i> AirTicket Request
                </a>
              </li>

              <li class="nav-item" [class.active]="activeTabNav === 'documentRequest'" (click)="selectTabNav('documentRequest')">
                <a class="nav-link" href="javascript:void(0)">
                  <i class="fa fa-paper-plane me-2"></i> Document Request
                </a>
              </li>

                 <li class="nav-item" [class.active]="activeTabNav === 'advsalaryRequest'" (click)="selectTabNav('advsalaryRequest')">
                <a class="nav-link" href="javascript:void(0)">
                  <i class="fa fa-paper-plane me-2"></i>Advance Salary Request
                </a>
              </li>
              <li class="nav-item" [class.active]="activeTabNav === 'loanRequest'" (click)="selectTabNav('loanRequest')">
                <a class="nav-link" href="javascript:void(0)">
                  <i class="fa fa-paper-plane me-2"></i> Loan Request
                </a>
              </li>
                <li class="nav-item" [class.active]="activeTabNav === 'resignationRequest'" (click)="selectTabNav('resignationRequest')">
                <a class="nav-link" href="javascript:void(0)">
                  <i class="fa fa-paper-plane me-2"></i> Resignation Request
                </a>
              </li>


            </ul>
          </li>



<li class="nav-item">
  <a class="nav-link d-flex justify-content-between align-items-center"
     href="javascript:void(0)">
    <div (click)="selectTab('asset')">
      <i class="bi bi-book me-2"></i>
      <span>Assets</span>
    </div>
    <i [class]="isAssetDropdownOpen ? 'bi bi-chevron-up' : 'bi bi-chevron-down'"></i>
  </a>
          
 </li>


 <li class="nav-item">
  <a class="nav-link d-flex justify-content-between align-items-center"
     href="javascript:void(0)">
    <div (click)="selectTab('airticket')">
      <i class="bi bi-book me-2"></i>
      <span>Airticket</span>
    </div>
    <i [class]="isAirtickDropdownOpen ? 'bi bi-chevron-up' : 'bi bi-chevron-down'"></i>
  </a>
          
 </li>

          <li class="nav-item" >
            <a class="nav-link d-flex justify-content-between align-items-center"
               href="javascript:void(0)"
               (click)="toggleApprovalsDropdown()">
              <div>
                <i class="bi bi-book me-2"></i>
                <span> Approvals</span>
              </div>
              <i [class]="isApprovalsDropdownOpen ? 'bi bi-chevron-up' : 'bi bi-chevron-down'"></i>
            </a>
          
            <!-- Dropdown Items -->
            <ul *ngIf="isApprovalsDropdownOpen" class="nav drop-nav-emp flex-column  mt-1">
              <li class="nav-item" [class.active]="activeTabNav === 'Genapproval'" (click)="selectTabNav('Genapproval')">
                <a class="nav-link" href="javascript:void(0)">
                  <i class="fa fa-paper-plane me-2"></i> General Approval
                </a>
              </li>
            </ul>

              <ul *ngIf="isApprovalsDropdownOpen" class="nav drop-nav-emp flex-column  mt-1">
              <li class="nav-item" [class.active]="activeTabNav === 'Resignationapproval'" (click)="selectTabNav('Resignationapproval')">
                <a class="nav-link" href="javascript:void(0)">
                  <i class="fa fa-paper-plane me-2"></i> Resignation Approval
                </a>
              </li>
            </ul>

            <ul *ngIf="isApprovalsDropdownOpen" class="nav drop-nav-emp flex-column  mt-1">
              <li class="nav-item" [class.active]="activeTabNav === 'Leaveapproval'" (click)="selectTabNav('Leaveapproval')">
                <a class="nav-link" href="javascript:void(0)">
                  <i class="fa fa-paper-plane me-2"></i> Leave Approval
                </a>
              </li>
            </ul>

            <ul *ngIf="isApprovalsDropdownOpen" class="nav drop-nav-emp flex-column  mt-1">
              <li class="nav-item" [class.active]="activeTabNav === 'Advsalapproval'" (click)="selectTabNav('Advsalapproval')">
                <a class="nav-link" href="javascript:void(0)">
                  <i class="fa fa-paper-plane me-2"></i> Advance Salary Approval
                </a>
              </li>
            </ul>

          <ul *ngIf="isApprovalsDropdownOpen" class="nav drop-nav-emp flex-column  mt-1">
              <li class="nav-item" [class.active]="activeTabNav === 'Loanapproval'" (click)="selectTabNav('Loanapproval')">
                <a class="nav-link" href="javascript:void(0)">
                  <i class="fa fa-paper-plane me-2"></i> Loan Approval
                </a>
              </li>
            </ul>

          <ul *ngIf="isApprovalsDropdownOpen" class="nav drop-nav-emp flex-column  mt-1">
              <li class="nav-item" [class.active]="activeTabNav === 'Assetapproval'" (click)="selectTabNav('Assetapproval')">
                <a class="nav-link" href="javascript:void(0)">
                  <i class="fa fa-paper-plane me-2"></i> Asset Approval
                </a>
              </li>
            </ul>

         <ul *ngIf="isApprovalsDropdownOpen" class="nav drop-nav-emp flex-column  mt-1">
              <li class="nav-item" [class.active]="activeTabNav === 'Airticketapproval'" (click)="selectTabNav('Airticketapproval')">
                <a class="nav-link" href="javascript:void(0)">
                  <i class="fa fa-paper-plane me-2"></i> Air Ticket Approval
                </a>
              </li>
            </ul>

           <ul *ngIf="isApprovalsDropdownOpen" class="nav drop-nav-emp flex-column  mt-1">
              <li class="nav-item" [class.active]="activeTabNav === 'Docapproval'" (click)="selectTabNav('Docapproval')">
                <a class="nav-link" href="javascript:void(0)">
                  <i class="fa fa-paper-plane me-2"></i> Document Approval
                </a>
              </li>
            </ul>

          </li>

        

        </ul>

        <div class="mt-5 mb-3 text-center">
          <button id="logout-btn" class="btn btn-outline-light btn-sm" (click)="logout()">
            <i class="fa fa-sign-out me-2"></i>Logout
          </button>
        </div>
      </div>
    </nav>

    <!-- Main Content Area -->
    <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
      <header
        class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
        <h1 class="h2">Employee Dashboard</h1>
        <div class="d-flex">

          <div class="input-group me-3">
            <input type="text" class="form-control" placeholder="Search..." aria-label="Search">
            <button class="btn btn-outline-secondary" type="button" id="search-btn">
              <i class="fa fa-search"></i>
            </button>
          </div>
<div class="col-md-2">
          <div class="dropdown position-relative" *ngIf="Documents">
            <button
              class="btn btn-outline-secondary position-relative"
              type="button"
              id="notification-btn"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              <i class="fa fa-bell">

              </i>

          
              <!-- ðŸ”´ Dynamic notification count -->
              <span
                *ngIf="notificationCount > 0"
                class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
              >
                {{ notificationCount }}
              </span>
            </button>


          
            <ul
              class="dropdown-menu dropdown-menu-end shadow"
              aria-labelledby="notification-btn"
            >
              <!-- âœ… List notifications dynamically -->
              <li *ngFor="let doc of Documents; let i = index">
                <a
                  class="dropdown-item d-flex justify-content-between align-items-start"
                  href="javascript:void(0)"
                >
                  <div>
                    <strong>Document Alert</strong>
                    <div class="text-muted small">
                      {{ doc.created_at | date: 'medium' }}
                    </div>
                    <div class="small mt-1 text-wrap">{{ doc.message }}</div>
                  </div>
                  <span class="badge bg-primary rounded-pill">New</span>
                </a>
                <!-- <li *ngIf="i < Documents.length - 1">
                  <hr class="dropdown-divider" />
                </li> -->
              </li>
          
              <!-- ðŸ”˜ When no notifications -->
              <li *ngIf="Documents.length === 0">
                <a class="dropdown-item text-center text-muted">No new notifications</a>
              </li>
     
              <!-- ðŸ”— View All -->
              <li>
                <hr class="dropdown-divider" />
              </li>
              <li><a class="dropdown-item text-center" href="#">View all notifications</a></li>
            </ul>
          </div>
          </div>


   <button
    class="btn btn-secondary"
    (click)="logout()"
  >
    <i class="fa fa-sign-out-alt me-0"></i> Logout
  </button>
    
          
        </div>
      </header>





      <!-- Dashboard Tab (Default View) -->
      <section class="content-tab animate__animated animate__fadeIn" id="dashboard"
        *ngIf="activeTabNav === 'dashboard'">
        <ul class="tab-group ">
          <li class="tab" [class.active]="activeTab === 'signup'" (click)="selectTab('signup')">
            <a href="javascript:void(0)">Profile</a>
          </li>
          <li class="tab" [class.active]="activeTab === 'login'" (click)="selectTab('login')">
            <a href="javascript:void(0)">Family Info</a>
          </li>
          <li class="tab" [class.active]="activeTab === 'qualification'" (click)="selectTab('qualification')">
            <a href="javascript:void(0)">Qualification</a>
          </li>

          <li class="tab" [class.active]="activeTab === 'bankdetails'" (click)="selectTab('bankdetails')">
            <a href="javascript:void(0)">Bank Details</a>
          </li>

          <li class="tab" [class.active]="activeTab === 'Jobhistory'" (click)="selectTab('Jobhistory')">
            <a href="javascript:void(0)">Job History</a>
          </li>
          <li class="tab" [class.active]="activeTab === 'document'" (click)="selectTab('document')">
            <a href="javascript:void(0)">Documents</a>
          </li>
          <li class="tab" [class.active]="activeTab === 'salary'" (click)="selectTab('salary')">
            <a href="javascript:void(0)">Salary</a>
          </li>
          <li class="tab" [class.active]="activeTab === 'asset'" (click)="selectTab('asset')">
            <a href="javascript:void(0)">Asset</a>
          </li>
          <li class="tab" [class.active]="activeTab === 'airticket'" (click)="selectTab('airticket')">
            <a href="javascript:void(0)">AirTicket</a>
          </li>
          <li class="tab" [class.active]="activeTab === 'loan'" (click)="selectTab('loan')">
            <a href="javascript:void(0)">Loan</a>
          </li>
          <li class="tab" [class.active]="activeTab === 'attendance'" (click)="selectTab('attendance')">
      <a href="javascript:void(0)">Attendance</a>
      </li>
        <li class="tab" [class.active]="activeTab === 'advanceSalary'" (click)="selectTab('advanceSalary')">
      <a href="javascript:void(0)">Advance Salary</a>
      </li>
          
        </ul>

        <div class="tab-content">
          <div id="signup" *ngIf="activeTab === 'signup'">
            <!-- Your Create Salary Component content -->
            <div class="row mb-4">
              <!-- Quick Stats Cards -->
              <div class="col-md-3 mb-4" *ngFor="let Empholiday of employeesec.leave_balance">
                <div class="card h-100 border-0 shadow-sm">
                  <div class="card-body">
                    <h5 class="card-title">{{Empholiday.leave_type}}</h5>
                    <div class="d-flex align-items-center" *ngIf="Empholiday.include_dashboard">
                      <h2 class="mb-0 me-2">{{Empholiday.balance}}</h2>
                      <span class="text-success"><i class="bi bi-arrow-up-short"></i> {{Empholiday.openings}}</span>
                    </div>
                    <div class="progress mt-3" style="height: 5px;">
                      <div class="progress-bar bg-primary" role="progressbar" style="width: 85%;" aria-valuenow="85"
                        aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                  </div>
                </div>
              </div>

            </div>

            <div class="row">
              <!-- Course Schedule -->
              <div class="col-md-12 mb-4">
                <div class="card border-0 shadow-sm">
                  <div class="card-header bg-white d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">Details</h5>
                    <div class="dropdown">
                      <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" id="courseDropdown"
                        data-bs-toggle="dropdown" aria-expanded="false">
                        2025
                      </button>
                      <ul class="dropdown-menu" aria-labelledby="courseDropdown">
                        <li><a class="dropdown-item" href="#">Fall 2024</a></li>
                        <li><a class="dropdown-item" href="#">Summer 2024</a></li>
                      </ul>
                    </div>
                  </div>
                  <div class="card-body">

                    <div class="emp_additional_details">
                      <div class="row">
                        <div class="col-md-3">


                          <div class="d-flex align-items-center">
                            <strong>Emp Code</strong>
                          </div>
                          <small class="text-center">{{ employeesec.emp_code }}</small>
                        </div>

                        <div class="col-md-3">


                          <div class="d-flex align-items-center">
                            <strong>Employee Status</strong>
                          </div>
                          <small class="text-center">{{employeesec.emp_status}}</small>
                          <!-- <h2>Employee Ess User</h2>
                              <h3>{{employee.is_ess}}</h3> -->
                        </div>

                        <div class="col-md-3">

                          <div class="d-flex align-items-center">
                            <strong>Designation</strong>
                          </div>
                          <small class="text-center">{{ employeesec.emp_desgntn_id }}</small>
                        </div>


                        <div class="col-md-3">

                          <div class="d-flex align-items-center mt-2">
                            <strong>Catogary</strong>
                          </div>
                          <small class="text-center">{{ employeesec.emp_ctgry_id }}</small>
                        </div>

                        <div class="col-md-3">

                          <div class="d-flex align-items-center mt-2">
                            <strong>Department</strong>
                          </div>
                          <small class="text-center">{{ employeesec.emp_dept_id }}</small>
                        </div>

                        <div class="col-md-3 ">

                          <div class="d-flex align-items-center mt-2">
                            <strong>Branch</strong>
                          </div>
                          <small class="text-center">{{ employeesec.emp_branch_id }}</small>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            
            </div>

            <div class="row">
               <div class="col-md-5 mb-4">
                <div class="card border-0 shadow-sm">
                  <div class="card-header bg-white">
                    <h5 class="mb-0"> <i class="fa fa-calendar-times me-2" aria-hidden="true"></i> Upcoming Holidays</h5>
                  </div>
                  <div class="card-body card-scroll p-0">
                    <ul class="list-group list-group-flush" *ngFor="let Empholiday of employeesec.holidays">
                      <li class="list-group-item d-flex justify-content-between align-items-center p-3">
                        <div>
                          <div class="d-flex align-items-center">
                            <i class="bi bi-calendar-event text-primary me-2"></i>
                            <strong>{{Empholiday.description}}</strong>
                          </div>
                          <small class="text-muted">{{Empholiday.start_date}}</small>
                        </div>
                        <span class="badge bg-danger rounded-pill">{{ calculateDaysLeft(Empholiday.start_date) }}</span>
                      </li>

                      <!-- <li class="list-group-item d-flex justify-content-between align-items-center p-3">
                        <div>
                          <div class="d-flex align-items-center">
                            <i class="bi bi-building text-info me-2"></i>
                            <strong>Tech Career Fair</strong>
                          </div>
                          <small class="text-muted">Mar 25, 2025 â€¢ 1:00 PM</small>
                        </div>
                        <span class="badge bg-info rounded-pill">2 weeks</span>
                      </li> -->

                    </ul>
                  </div>
                  <div class="card-footer bg-white text-center">
                    <a href="#" class="btn btn-sm btn-outline-primary">View Full Calendar</a>
                  </div>
                </div>

                
              </div>


              <div class="col-md-7 mb-4">
                <div class="card border-0 shadow-sm ">
                  <div class="card-header bg-white">
                    <h5 class="mb-0">
                      <i class="fa fa-bullhorn me-2" aria-hidden="true"></i> Announcements
                    </h5>
                  </div>
                
                  <div class="card-body card-scroll">
                    <div *ngIf="EmpAnnouncement && EmpAnnouncement.length > 0; else noAnnouncements">
                      <div *ngFor="let ann of EmpAnnouncement" class="annou_Card mb-3 p-3 border rounded shadow-sm">
                        <div class="row align-items-center">
                          <div class="col-md-11">
                            <h2 >{{ ann.title }}</h2>
                            <h3 >
                              {{ ann.schedule_at | date: 'mediumDate' }} â€“ {{ ann.expires_at | date: 'mediumDate' }}
                            </h3>
                          </div>
                          <div class="col-md-1 text-end">
                            <button
                              type="button"
                              class="btn-announcement-expand btn btn-light btn-sm"
                              (click)="toggleExpand(ann)"
                            >
                              <i class="fa" [ngClass]="ann.expanded ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
                            </button>
                          </div>
                        </div>
                
                        <div
                          class="Annoucement-body mt-2 ps-2 border-start border-2 border-primary"
                          *ngIf="ann.expanded"
                        >
                          <h2 class="mb-0">{{ ann.message }}</h2>
                
                          <div *ngIf="ann.attachment" class="mt-2">
                            <a [href]="ann.attachment" target="_blank" class="text-decoration-none text-primary">
                              <i class="fa fa-paperclip me-1"></i> View Attachment
                            </a>
                          </div>
                        </div>
                      </div>
                    </div>
                
                    <ng-template #noAnnouncements>
                      <p class="text-muted text-center mb-0">No announcements available.</p>
                    </ng-template>
                  </div>
                </div>
                
                
              </div>
              </div>

             <!-- EMPLOYEE PROJECT SECTION -->
<div class="project-section" *ngIf="employeesec.projects?.length > 0; else noProjects">
  <h3 class="section-title">ðŸ§© Employee Projects</h3>

  <div class="project-grid">
    <div class="project-card" *ngFor="let project of employeesec.projects">
      <div class="project-header">
        <div class="left">
          <h4 class="project-title">{{ project.title || 'Untitled Project' }}</h4>
          <p class="project-desc">{{ project.description }}</p>
        </div>
        <span class="status-badge" [ngClass]="project.status">{{ project.status }}</span>
      </div>

      <div class="project-meta">
        <div class="meta-item">
          <i class="fa fa-calendar-alt"></i>
          <span><strong>Start:</strong> {{ project.start_date | date }}</span>
        </div>
        <div class="meta-item">
          <i class="fa fa-calendar-check"></i>
          <span><strong>End:</strong> {{ project.end_date | date }}</span>
        </div>
      </div>

      <div class="project-meta">
        <div class="meta-item">
          <i class="fa fa-user-tie"></i>
          <span><strong>Managers:</strong> {{ project.managers.join(', ') || 'â€”' }}</span>
        </div>
        <div class="meta-item">
          <i class="fa fa-users"></i>
          <span><strong>Members:</strong> {{ project.members.join(', ') || 'â€”' }}</span>
        </div>
      </div>

      <div *ngIf="project.document" class="project-doc">
        <a [href]="project.document" target="_blank">
          <i class="fa fa-paperclip"></i> View Project Document
        </a>
      </div>

      <!-- TASKS SECTION -->
      <div class="task-list" *ngIf="project.tasks?.length > 0">
        <h5>ðŸ“‹ Tasks</h5>
        <div class="task-item" *ngFor="let task of project.tasks">
          <div class="task-header">
            <strong>{{ task.title }}</strong>
            <span class="task-status" [ngClass]="task.status">{{ task.status }}</span>
          </div>
          <p class="task-desc">{{ task.description }}</p>
          <small class="task-date">
            <i class="fa fa-clock"></i> {{ task.start_date | date }} â†’ {{ task.end_date | date }}
          </small>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #noProjects>
  <p class="no-data">No projects assigned</p>
</ng-template>
  <!-- If no projects -->

  <!-- If no projects -->  

   
  <ng-template #noProjects>
    <p class="no-data">No projects assigned</p>
  </ng-template>  


          </div>

          <div id="login" *ngIf="activeTab === 'login'">
            <!-- Your Run Employee Salary content -->
            <div class="card border-0 shadow-sm">
              <div class="card-header bg-white d-flex justify-content-between align-items-center">
                <h5 class="mb-0">Details</h5>

              </div>
              <div class="card-body">

                <div class=" emp_additional_details " *ngFor="let familyMember of employeesec.emp_family">
                  <div class="row">
                    <div class="col-md-3">
                      <div class="d-flex align-items-center">

                        <strong> Member Name</strong>
                      </div>
                      <small class="text-center">{{ familyMember.ef_member_name }} </small>
                    </div>
                    <div class="col-md-3">
                      <div class="d-flex align-items-center">

                        <strong>Date Of Birth</strong>
                      </div>
                      <small class="text-center">{{ familyMember.ef_date_of_birth }} </small>
                    </div>

                    <div class="col-md-3">
                      <div class="d-flex align-items-center">

                        <strong>Employee Relation</strong>
                      </div>

                      <small class="text-center">{{ familyMember.emp_relation }} </small>
                    </div>
                    <div class="col-md-3">
                      <div class="d-flex align-items-center">

                        <strong> Family Company Expense</strong>
                      </div>

                      <small class="text-center">{{ familyMember.ef_company_expence }} </small>
                    </div>


                  </div>




                </div>

                <!-- <div class="table-responsive">
                  <table class="table table-hover">
                    <thead>
                      <tr>
                        <th>Course</th>
                        <th>Instructor</th>
                        <th>Schedule</th>
                        <th>Grade</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>CS301: Data Structures</td>
                        <td>Dr. Smith</td>
                        <td>MWF 10:00-11:15</td>
                        <td><span class="badge bg-success">A</span></td>
                      </tr>
                      <tr>
                        <td>MATH241: Linear Algebra</td>
                        <td>Prof. Johnson</td>
                        <td>TR 13:00-14:30</td>
                        <td><span class="badge bg-primary">B+</span></td>
                      </tr>
                      <tr>
                        <td>ENG210: Technical Writing</td>
                        <td>Dr. Williams</td>
                        <td>MWF 14:00-15:15</td>
                        <td><span class="badge bg-warning text-dark">C</span></td>
                      </tr>
                      <tr>
                        <td>PHYS201: Physics II</td>
                        <td>Dr. Garcia</td>
                        <td>TR 9:30-11:00</td>
                        <td><span class="badge bg-success">A-</span></td>
                      </tr>
                    </tbody>
                  </table>
                </div> -->
              </div>
            </div>
          </div>

          <div id="qualification" *ngIf="activeTab === 'qualification'">
            <!-- Your Run Employee Salary content -->
            <div class="card border-0 shadow-sm">
              <div class="card-header bg-white d-flex justify-content-between align-items-center">
                <h5 class="mb-0">Details</h5>

              </div>
              <div class="card-body">

                <div class="emp_additional_details  mt-3" *ngFor="let Qualification of employeesec.emp_qualification">
                  <div class="row">
                    <div class="col-md-3">
                      <div class="d-flex align-items-center">

                        <strong>Employee Qualification</strong>
                      </div>
                      <small class="text-center">{{ Qualification.emp_qualification }} </small>
                    </div>
                    <div class="col-md-3">
                      <div class="d-flex align-items-center">

                        <strong>Year</strong>
                      </div>
                      <small class="text-center">{{ Qualification.emp_qf_year }} </small>
                    </div>

                    <div class="col-md-3">
                      <div class="d-flex align-items-center">

                        <strong>Subject</strong>
                      </div>

                      <small class="text-center">{{ Qualification.emp_qf_subject }} </small>
                    </div>
                    <div class="col-md-3">
                      <div class="d-flex align-items-center">

                        <strong>Institution</strong>
                      </div>
                      <small class="text-center">{{ Qualification.emp_qf_instituition }} </small>
                    </div>



                  </div>


                </div>


              </div>
            </div>
          </div>

          <div id="bankdetails" *ngIf="activeTab === 'bankdetails'">
            <!-- Your Run Employee Salary content -->
            <div class="card border-0 shadow-sm">
              <div class="card-header bg-white d-flex justify-content-between align-items-center">
                <h5 class="mb-0">Details</h5>

              </div>
              <div class="card-body">

                <div class="emp_additional_details  mt-3" *ngFor="let Qualification of employeesec.emp_bank">
                  <div class="row">
                    <div class="col-md-3">
                      <div class="d-flex align-items-center">

                        <strong>Bank Name</strong>
                      </div>
                      <small class="text-center">{{ Qualification.bank_name }} </small>
                    </div>
                    <div class="col-md-3">
                      <div class="d-flex align-items-center">

                        <strong>Branch name</strong>
                      </div>
                      <small class="text-center">{{ Qualification.branch_name }} </small>
                    </div>

                    <div class="col-md-3">
                      <div class="d-flex align-items-center">

                        <strong>Account Number</strong>
                      </div>

                      <small class="text-center">{{ Qualification.account_number }} </small>
                    </div>
                    <div class="col-md-3">
                      <div class="d-flex align-items-center">

                        <strong>Bank Address</strong>
                      </div>
                      <small class="text-center">{{ Qualification.bank_address }} </small>
                    </div>

                    <div class="col-md-3">
                      <div class="d-flex align-items-center">

                        <strong>Route Code</strong>
                      </div>
                      <small class="text-center">{{ Qualification.route_code }} </small>
                    </div>
                    <div class="col-md-3">
                      <div class="d-flex align-items-center">

                        <strong>Iban Number</strong>
                      </div>
                      <small class="text-center">{{ Qualification.iban_number }} </small>
                    </div>
                    <div class="col-md-3">
                      <div class="d-flex align-items-center">

                        <strong>Active Status</strong>
                      </div>
                      <small class="text-center">{{ Qualification.is_active }} </small>
                    </div>


                  </div>


                </div>


              </div>
            </div>
          </div>

          <div id="Jobhistory" *ngIf="activeTab === 'Jobhistory'">
            <!-- Your Run Employee Salary content -->
            <div class="card border-0 shadow-sm">
              <div class="card-header bg-white d-flex justify-content-between align-items-center">
                <h5 class="mb-0">Details</h5>

              </div>
              <div class="card-body">

                <div class="emp_additional_details  mt-3" *ngFor="let Jobhistory of employeesec.emp_job_history">
                  <div class="row">
                    <div class="col-md-3">
                      <div class="d-flex align-items-center">

                        <strong>Company Name</strong>
                      </div>
                      <small class="text-center">{{ Jobhistory.emp_jh_company_name }}</small>
                    </div>
                    <div class="col-md-3">
                      <div class="d-flex align-items-center">

                        <strong>Designation</strong>
                      </div>
                      <small class="text-center">{{ Jobhistory.emp_jh_designation }} </small>
                    </div>

                    <div class="col-md-3">
                      <div class="d-flex align-items-center">

                        <strong>From Date</strong>
                      </div>
                      <small class="text-center">{{ Jobhistory.emp_jh_from_date }} </small>
                    </div>
                    <div class="col-md-3">
                      <div class="d-flex align-items-center">

                        <strong>End Date</strong>
                      </div>
                      <small class="text-center">{{ Jobhistory.emp_jh_end_date }} </small>
                    </div>

                    <div class="col-md-3">
                      <div class="d-flex align-items-center">

                        <strong>Last Leaving Salary Per Month</strong>
                      </div>
                      <small class="text-center">{{ Jobhistory.emp_jh_leaving_salary_permonth }} </small>
                    </div>
                    <div class="col-md-3">
                      <div class="d-flex align-items-center">

                        <strong> Leaving Reason</strong>
                      </div>
                      <small class="text-center">{{ Jobhistory.emp_jh_reason }} </small>
                    </div>

                    <div class="col-md-3">
                      <div class="d-flex align-items-center">

                        <strong> Total Experiance</strong>
                      </div>
                      <small class="text-center">{{ Jobhistory.emp_jh_years_experiance }} </small>
                    </div>




                  </div>


                </div>


              </div>
            </div>
          </div>

          <div id="document" *ngIf="activeTab === 'document'">
            <!-- Your Run Employee Salary content -->
            <div class="card border-0 shadow-sm">
              <div class="card-header bg-white d-flex justify-content-between align-items-center">
                <h5 class="mb-0">Details</h5>

              </div>
              <div class="card-body">

                <div class="tab_content  mt-3">
                  <div class="row mt-3" *ngFor="let document of employeesec.emp_documents">
                    <div class="col-md-2">
                      <h2>Document number</h2>
                      <h3>{{ document.emp_doc_number }}</h3>
                    </div>
                    <div class="col-md-2">
                      <h2>issue Date</h2>
                      <h3> {{ document.emp_doc_issued_date }}</h3>
                    </div>


                    <div class="col-md-2">
                      <h2>expired date</h2>
                      <h3>{{ document.emp_doc_expiry_date }} </h3>
                    </div>

                    <div class="col-md-2">
                      <h2>Type</h2>
                      <h3>{{ document.document_type }}</h3>
                    </div>

                    <div class="col-md-1">
                      <h2> Status</h2>
                      <h3> {{ document.is_active }}</h3>
                    </div>



                    <div class="col-md-3">
                      <h2>Employee Document</h2>

                      <div *ngIf="document.emp_doc_document">
                        <a [href]="document.emp_doc_document" target="_blank"
                          *ngIf="isPDF(document.emp_doc_document)">View Document</a>
                        <img [src]="document.emp_doc_document" alt="Employee Document"
                          *ngIf="!isPDF(document.emp_doc_document)" style="width: 100px; height: auto;">
                      </div>
                      <div *ngIf="!document.emp_doc_document">No Document Available</div>
                    </div>



                    <!-- <div class="col-md-3" >
                          <h2>employee document</h2>
                          <img src="{{ document.emp_doc_document }}"  alt="Employee Document">
                      </div> -->







                  </div>


                </div>


              </div>
            </div>
          </div>

          <div id="salary" *ngIf="activeTab === 'salary'">
            <!-- Your Run Employee Salary content -->
            <div class="card border-0 shadow-sm">
              <div class="card-header bg-white d-flex justify-content-between align-items-center">
                <h5 class="mb-0">Details</h5>

              </div>
              <div class="card-body">

                <div class="tab_content  mt-3">

                  <div class="table-scroll">

                    <table class="styled-table" width="100%" style=" border-collapse: collapse; min-width: 1200px;">
                      <thead>
                        <tr>
                          <th class="text-table-header" style="width: 0;">No</th>
                          <!-- <th class="text-table-header">Employee</th> -->
                          <th class="text-table-header">Name</th>
                          <th class="text-table-header">Year</th>

                          <th class="text-table-header">Month</th>

                          <th class="text-table-header">Total Working Days</th>

                          <th class="text-table-header">Day Worked</th>
                          <th class="text-table-header">Payment Date</th>
                          <th class="text-table-header">Components </th>
                          <th class="text-table-header">Gross Salary</th>
                          <th class="text-table-header">Net Salary</th>
                          <th class="text-table-header">Status</th>
                          <!-- <th class="text-table-header">Payslip Component</th> -->
                        </tr>
                      </thead>
                      <tbody class="text-table-body">
                        <tr class="tbodytext" *ngFor="let payslip of employeesec.payslip; let i = index">
                          <td>{{ i + 1 }}</td>
                          <!-- <td class="table-body-text-spl">{{ payslip.employee }}</td> -->
                          <td>{{ payslip.payroll_run?.name }}</td>
                          <td>{{ payslip.payroll_run?.year }}</td>

                          <td>{{ payslip.payroll_run?.month }}</td>

                          <td>{{ payslip.total_working_days }}</td>

                          <td>{{ payslip.days_worked }}</td>
                          <td>{{ payslip.payroll_run?.payment_date }}</td>
                          <td data-label="Components">
                            <ul>
                              <li *ngFor="let comp of payslip.components">
                                <strong>{{ comp.component_name }}</strong>
                                ({{ comp.component_type }}): {{ comp.payslip_amount }}
                              </li>
                            </ul>
                          </td>
                          <td>{{ payslip.gross_salary }}</td>
                          <td>{{ payslip.net_salary }}</td>
                          <td>
                            <span class="pill" [ngClass]="{
                            'pill green': payslip.status === 'approved',
                            'pill blue': payslip.status === 'processed',

                            'pill yellow': payslip.status === 'pending',
                            'pill red': payslip.status === 'rejected'
                          }">
                              {{ payslip.status }}
                            </span>
                          </td>
                          <!-- <td>{{ payslip.end_date }}</td> -->
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>


              </div>
            </div>
          </div>

          <div id="asset" *ngIf="activeTab === 'asset'">
            <!-- Your Run Employee Salary content -->
            <div class="card border-0 shadow-sm">
              <div class="card-header bg-white d-flex justify-content-between align-items-center">
                <h5 class="mb-0">Details</h5>

              </div>
              <div class="card-body">

                <div class="tab_content mt-3" *ngFor="let member of EmpAssets">
                  <div class="row">
                    <div class="col-md-3">
                      <h2>Asset Name</h2>
                      <h3>{{ member.asset }}</h3>
                    </div>
                    <div class="col-md-3">
                      <h2>Assigned Date</h2>
                      <h3>{{ member.assigned_date }}</h3>
                    </div>
                    <div class="col-md-3">
                      <h2>Return Condition</h2>
                      <h3>{{ member.return_condition }}</h3>
                    </div>
                    <div class="col-md-3">
                      <h2>Return Date</h2>
                      <h3>{{ member.returned_date }}</h3>
                    </div>

                    <!-- Custom fields -->
                    <!-- <ng-container *ngFor="let field of member.fam_custom_fields">
                      <div class="col-md-3">
                        <h2>{{ field.emp_custom_field }}</h2>
                        <h3>{{ field.field_value }}</h3>
                      </div>
                    </ng-container> -->
                  </div>
                </div>


              </div>
            </div>
          </div>

          <div id="loan" *ngIf="activeTab === 'loan'">
            <!-- Your Run Employee Salary content -->
            <div class="card border-0 shadow-sm">
              <div class="card-header bg-white d-flex justify-content-between align-items-center">
                <h5 class="mb-0">Details</h5>

              </div>
              <div class="card-body">

                <div class="tab_content mt-3" >
                  <div class="table-scroll">

                    <table class="styled-table" width="100%" style=" border-collapse: collapse; min-width: 1200px;">
                      <thead>
                        <tr>
                          <th class="text-table-header" style="width: 0;">No</th>
                          <!-- <th class="text-table-header">Employee</th> -->
                          <th class="text-table-header">Amount requested</th>
                          <th class="text-table-header">EMI Amount</th>

                          <th class="text-table-header">Loan Type</th>
                          <th class="text-table-header">Document Number</th>

                          <th class="text-table-header">Repayment Period</th>

                          <th class="text-table-header">Remaining Balance</th>
                          <th class="text-table-header">applied on</th>
                          <th class="text-table-header">applied on</th>
                          <th class="text-table-header">Disbursement date</th>
                          <th class="text-table-header">Status</th>
                          <!-- <th class="text-table-header">Payslip Component</th> -->
                        </tr>
                      </thead>
                      <tbody class="text-table-body">
                        <tr class="tbodytext" *ngFor="let loan of EmpLoan; let i = index">
                          <td>{{ i + 1 }}</td>
                          <!-- <td class="table-body-text-spl">{{ payslip.employee }}</td> -->
                          <td>{{ loan.amount_requested }}</td>

                          <td>{{ loan.emi_amount }}</td>

                          <td>{{ loan.loan_type }}</td>
                          <td>{{ loan.document_number }}</td>
                          <td>{{ loan.repayment_period }}</td>

                          <td>{{ loan.remaining_balance }}</td>
                          <td>{{ loan.applied_on }}</td>
                      
                          <td>{{ loan.approved_on }}</td>
                          <td>{{ loan.disbursement_date }}</td>
                          <td>
                            <span class="pill" [ngClass]="{
                              'pill green': loan.status === 'approved',
                              'pill blue': loan.status === 'processed',
  
                              'pill yellow': loan.status === 'pending',
                              'pill red': loan.status === 'rejected'
                            }">
                              {{ loan.status }}
                            </span>
                          </td>
                          <!-- <td>{{ payslip.end_date }}</td> -->
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>


              </div>
            </div>
          </div>

          <div id="attendance" *ngIf="activeTab === 'attendance'">
            <!-- Your Run Employee Salary content -->
            <div class="card border-0 shadow-sm">
              <div class="card-header bg-white d-flex justify-content-between align-items-center">
                <h5 class="mb-0">Details</h5>

              </div>
              <div class="card-body">

                <div class="tab_content  mt-3">
                                 
                  <div class="row">
                      <div class="col-md-6">
                          <label >Year</label>
                          <input
                            type="number"
                            class="form-control"
                            [(ngModel)]="year"
                            [ngModelOptions]="{standalone: true}"
                          />
                      </div>
                      <div class="col-md-6">
                          <label >Month</label>
                          <input
                            type="number"
                            class="form-control"
                            [(ngModel)]="month"
                            [ngModelOptions]="{standalone: true}"
                          />
                      </div>
                      
                  
                      </div>
                      <div class="row">
                          <div class="col-md-10">
                      
                          </div>
                          <div class="col-md-2 mt-3">
                              <button class="btn btn-primary" (click)="generateAttendanceReport()">Generate Report</button>
                            </div>
                      </div>
                      

                      <div *ngIf="attendanceData">
                          <div class="row">
                              <div class="col-md-8">
                                  <h2>Attendance Sheet for {{ attendanceData.employee_name }} - {{ attendanceData.month }}/{{ attendanceData.year }}</h2>
                      
                              </div>
                      
                              <div class="col-md-2">
                                  <button type="button" class="btn btn-success pull-right" (click)="exportToExcel()">Export</button>
                              </div>
                          </div>   

<div class="table-container table-scroll">
<table class="table table-bordered table-hover mt-3 text-center">
<thead>
<tr>
<th>Employee Name</th>
<th *ngFor="let day of daysArray">Day {{ day }}</th>
<!-- <th>Total Days</th> -->
<th>Present Days</th>
<th>Absent Days</th>
</tr>
</thead>
<tbody>
<tr>
<td>{{ attendanceData.employee_name }}</td>
<td *ngFor="let day of daysArray">
{{ getStatusForDay(day, attendanceData.summary_data) }}
</td>
<!-- <td>{{ attendanceData.total_days }}</td> -->
<td>{{ attendanceData.total_present }}</td>
<td>{{ attendanceData.total_absent }}</td>
</tr>
</tbody>
</table>
</div>
</div>


              </div>

              </div>
            </div>
          </div>


           <div id="advanceSalary" *ngIf="activeTab === 'advanceSalary'">
            <!-- Your Run Employee Salary content -->
            <div class="card border-0 shadow-sm">
              <div class="card-header bg-white d-flex justify-content-between align-items-center">
                <h5 class="mb-0">Details</h5>

              </div>
              <div class="card-body">

                <div class="tab_content mt-3" >
                  <div class="table-scroll">

                    <table class="styled-table" width="100%" style=" border-collapse: collapse; min-width: 1200px;">
                      <thead>
                        <tr>
                          <th class="text-table-header" style="width: 0;">No</th>
                          <!-- <th class="text-table-header">Employee</th> -->
                          <th class="text-table-header">Amount requested</th>
                          <th class="text-table-header">EMI Amount</th>

                          <th class="text-table-header">Loan Type</th>
                          <th class="text-table-header">Document Number</th>

                          <th class="text-table-header">Repayment Period</th>

                          <th class="text-table-header">Remaining Balance</th>
                          <th class="text-table-header">applied on</th>
                          <th class="text-table-header">applied on</th>
                          <th class="text-table-header">Disbursement date</th>
                          <th class="text-table-header">Status</th>
                          <!-- <th class="text-table-header">Payslip Component</th> -->
                        </tr>
                      </thead>
                      <tbody class="text-table-body">
                        <tr class="tbodytext" *ngFor="let advanceSalary of AdvSalary; let i = index">
                          <td>{{ i + 1 }}</td>
                          <!-- <td class="table-body-text-spl">{{ payslip.employee }}</td> -->
                          <td>{{ advanceSalary.amount_requested }}</td>

                          <td>{{ advanceSalary.emi_amount }}</td>

                          <td>{{ advanceSalary.loan_type }}</td>
                          <td>{{ advanceSalary.document_number }}</td>
                          <td>{{ advanceSalary.repayment_period }}</td>

                          <td>{{ advanceSalary.remaining_balance }}</td>
                          <td>{{ advanceSalary.applied_on }}</td>
                      
                          <td>{{ advanceSalary.approved_on }}</td>
                          <td>{{ advanceSalary.disbursement_date }}</td>
                          <td>
                            <span class="pill" [ngClass]="{
                              'pill green': advanceSalary.status === 'approved',
                              'pill blue': advanceSalary.status === 'processed',
  
                              'pill yellow': advanceSalary.status === 'pending',
                              'pill red': advanceSalary.status === 'rejected'
                            }">
                              {{ advanceSalary.status }}
                            </span>
                          </td>
                          <!-- <td>{{ payslip.end_date }}</td> -->
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>


              </div>
            </div>
          </div>



        </div>

      </section>

      <!-- Other tabs would go here, initially hidden -->
      <section class="content-tab  animate__animated animate__fadeIn" id="leaverequest"
        *ngIf="activeTabNav === 'leaverequest'">
        <!-- Academic content here -->


        <div class="white-outer-sec">
          <form (ngSubmit)="requestLeave()" enctype="multipart/form-data">
            <div class="row">

              
              <div class="col-md-3">
                <label>Leave Type</label>
                <div class="custom-sel">
<select class="form-control"
        [(ngModel)]="leave_type"
        required
        [ngModelOptions]="{standalone: true}">
  <option value="">-- Select Leave Type --</option>
  <option *ngFor="let lt of LeaveTypes" [value]="lt.id">
    {{ lt.leave_type }}
  </option>
</select>
          
                </div>
              </div>


 <div class="col-md-3">
  <label>Document Number</label>
  <input 
    type="text" 
    class="form-control" 
    [(ngModel)]="document_number" 
    placeholder="Enter document number"
    [disabled]="automaticNumbering"
    [ngModelOptions]="{standalone: true}"
    [required]="!automaticNumbering"  
  >

  <!-- Optional: show hint when disabled -->
  <small *ngIf="automaticNumbering" class="text-muted">
    Document number will be auto-generated
  </small>
</div>
              

              <!-- <div class="col-md-3">
                <label>Document Number</label>
                <input type="text" class="form-control" required [(ngModel)]="document_number" placeholder="Enter Document number"
                       [ngModelOptions]="{standalone: true}" [ngClass]="{'error-field': registerButtonClicked && !document_number}">
                <div *ngIf="registerButtonClicked && !document_number" class="error-message">Document number is required.</div>
              </div> -->
          


            
             


              <div class="col-md-3">
                <label>Start Date</label>
                <input type="date" class="form-control" required [(ngModel)]="start_date" placeholder="Enter Start Date" (change)="calculateTotalDays()"
                       [ngModelOptions]="{standalone: true}" [ngClass]="{'error-field': registerButtonClicked && !start_date}">
                <div *ngIf="registerButtonClicked && !start_date" class="error-message">start date is required.</div>
              </div>
          
              <div class="col-md-3">
                <label>End Date</label>
                <input type="date" class="form-control" required [(ngModel)]="end_date" placeholder="Enter End Date" (change)="calculateTotalDays()"
                       [ngModelOptions]="{standalone: true}" [ngClass]="{'error-field': registerButtonClicked && !end_date}">
                <div *ngIf="registerButtonClicked && !end_date" class="error-message">End Date is required.</div>
              </div>


              <div class="col-m-3">
                <label>total days</label>
                <input type="text" class="form-control" [value]="totalDays" readonly>
              </div>


              <div class="col-md-12">
                <label>Reason</label>
                <textarea class="form-control" [(ngModel)]="reason" [ngModelOptions]="{standalone: true}"></textarea>
              </div>


         

              <!-- <div class="col-md-6">
                <label>Approved On</label>
                <input type="date" class="form-control" required [(ngModel)]="approved_on" placeholder="Enter date of approved on"
                       [ngModelOptions]="{standalone: true}" >
              </div> -->

              <div class="col-md-3">
                <label></label>
                <div class="check-box-selection-sec form-control mt-3">
                  <div class="mat-set">
                    <mat-checkbox [(ngModel)]="dis_half_day" [ngModelOptions]="{standalone: true}">Half Day</mat-checkbox>
                  </div>
                </div>
              </div>
              
              <div class="col-md-3" *ngIf="dis_half_day">
                <label>Half Day Period</label>
                <div class="custom-sel">
                  <select class="form-control" id="half_day_period" name="half_day_period" [(ngModel)]="half_day_period" [ngModelOptions]="{standalone: true}">
                    <option value="first_half">First Half</option>
                    <option value="second_half">Second Half</option>
                  </select>
                </div>
              </div>


              <!-- <div class="col-md-6">
                <label>Created By</label>
                <div class="custom-sel">
                  <select class="form-control" id="approved_by" name="approved_by" [(ngModel)]="approved_by" [ngModelOptions]="{standalone: true}">
                    <option *ngFor="let approver of Users" [value]="approver.id">{{ approver.email }}</option>
                  </select>
                </div>
              </div> -->

          
         
          
         
            </div>
          
            <div class="row">
              <div class="col-md-9"></div>
              <div class="col-md-3">
                <button type="submit" class="btn btn-success btn-full mt-4">Add Leave Request</button>
              </div>
            </div>
          </form>

        </div>


        <div class="white-outer-sec">


          <div class="row">

            <div class="col-md-12">
              <div class="table-scroll">
              
              <table class="styled-table" width="100%" style=" border-collapse: collapse; min-width: 1200px;">
                <thead>
                  <tr>
                    <th class="text-table-header" style="width: 0;">No</th>
                    <!-- <th class="text-table-header">Employee</th> -->
                    <th class="text-table-header">Document Number</th>
                    <th class="text-table-header">Start Date</th>

                    <th class="text-table-header">End Date</th>
                    <th class="text-table-header">Leave Type</th>

                    <th class="text-table-header">Reason</th>
                    <th class="text-table-header">Status</th>

                    <!-- <th class="text-table-header">Payslip Component</th> -->
                  </tr>
                </thead>
                <tbody class="text-table-body">
                  
                  <tr class="tbodytext" *ngFor="let leavereq of employeesec.leave_rqsts; let i = index">
                    <td>{{ i + 1 }}</td>
                    <td>{{ leavereq.document_number || '-' }}</td>
                    <td>{{ leavereq.start_date }}</td>
                    <td>{{ leavereq.end_date }}</td>
                    <td>{{ leavereq.leave_type }}</td>
                    <td>{{ leavereq.reason }}</td>
                    <td>{{ leavereq.approvals?.[0]?.status || '-' }}</td>


                  </tr>
                </tbody>
              </table>
              </div>
            </div>
          </div>
          </div>
          <!-- <div class="tab_boddy mt-4">
          <div  class="row">
            <div class="col-md-12">
              <div class="">
                <div *ngIf="employeesec.leave_rqsts && employeesec.leave_rqsts.length > 0; else noLeaveRequests">
                  <div  class="">
                    <div class="row">
                      <div class="col-md-5">
                        <div class="leave_box" *ngFor="let request of employeesec.leave_rqsts" (click)="selectRequest(request.id)"
                        [ngClass]="{'selected-request': selectedRequestId === request.id}">
                          <div class="row">
                            <div class="col-md-4">
                              <label>Leave Type</label>
                              <h6>{{ request.leave_type || 'N/A' }}</h6>
                            </div>
                            <div class="col-md-4">
                              <label>Start Date</label>
                              <h6>{{ request.start_date }}</h6>
                            </div>
                            <div class="col-md-4">
                              <label>End Date</label>
                              <h6>{{ request.end_date }}</h6>
                            </div>
                          </div>
                        </div>
                      </div>
        
                      <div class="col-md-7" >
                          <div *ngFor="let request of employeesec.leave_rqsts">
                          
                        <div class="leave_box"  *ngIf="selectedRequestId === request.id">
                          <div class="approval-steps" *ngIf="request.approvals && request.approvals.length > 0">
                            <h5>Leave Approval Status</h5><hr>
                            <div *ngFor="let approval of request.approvals" class="row">
                              <div class="col-md-3">
                                <label>Status</label>
                                <h6>{{ approval.status }}</h6>
                              </div>
                              <div class="col-md-3">
                                <label>Role</label>
                                <h6>{{ approval.role }}</h6>
                              </div>
                              <div class="col-md-3">
                                <label>Approver</label>
                                <h6>{{ approval.approver || 'N/A' }}</h6>
                              </div>
                              <div class="col-md-3">
                                <label>Note</label>
                                <h6>{{ approval.note || 'N/A' }}</h6>
                              </div>
                            </div>
                          </div>
                        </div>
                        </div>
                      </div>
                    </div>  
                  </div>
                </div>

                <ng-template #noLeaveRequests>
                  <p>No leave requests available for this employee.</p>
                </ng-template>
              </div>
            </div>
          </div>
</div> -->
      </section>

      <section class="content-tab  animate__animated animate__fadeIn" id="generalRequest"
      *ngIf="activeTabNav === 'generalRequest'">


        <!-- Extracurricular content here -->

           <div class="white-outer-sec">
            <form >

              <div class="row">
  
              
  
                  <!-- <div class="col-md-3">
                      <div class="custom-sel">
                          <label>Select Branches</label>
                          <select class="form-control" id="branch" required [(ngModel)]="branch" (change)="onBranchChange($event)" [ngModelOptions]="{standalone: true}" [ngClass]="{'error-field': registerButtonClicked && !branch}">
                              <option value="">Select</option>
                              <option *ngFor="let deparmentsec of branches" [value]="deparmentsec.id">{{ deparmentsec.branch_name }}</option>
                          </select>
                          <div *ngIf="registerButtonClicked && !branch" class="error-message">Please Select Your Branch</div>
                      </div>
                  </div> -->
                  <div class="col-md-6">
                      <label>Document Number</label>
                      <input type="text" class="form-control" required [(ngModel)]="document_number" placeholder="Enter document number"
                          [disabled]="automaticNumbering" [ngModelOptions]="{standalone: true}" >
                  </div>
                  
  
                <div class="col-md-6" >
                 
                  <label>Reason</label>
                 <input type="text"  class="form-control" required  [(ngModel)]="reason"  placeholder="Enter Reason"
                  [ngModelOptions]="{standalone: true}" >
                 
            </div>
  
  
         
            
        
      
  
      
            <div class="col-md-6">
              <div class="custom-sel">
                <label>Select Request Type</label>
                <select class="form-control"
                        id="request_type"
                        required
                        [(ngModel)]="request_type"
                        [ngModelOptions]="{standalone: true}"
                     
                        (change)="onRequestTypeChange($event)">
                  <option value="">Select</option>
                  <option *ngFor="let req of RequestType" [value]="req.id">{{ req.name }}</option>
                </select>
            
              </div>
            </div>
            
            <!-- Show Total field only if salary_component is not null -->
            <div class="col-md-6" *ngIf="selectedSalaryComponent">
              <label>Total</label>
              <input type="number"
                     class="form-control"
                     required
                     [(ngModel)]="total"
                     placeholder="Enter total"
                     [ngModelOptions]="{standalone: true}">
            </div>
            

     
  
  
    
  
      

  
      <div class="col-md-6">
          <label>Request Document</label>
          <input type="file" class="form-control" (change)="onFileChange($event)">
        </div>
      <div class="col-md-12">
          <label>Remarks</label>
          <textarea class="form-control" rows="3" [(ngModel)]="remarks" [ngModelOptions]="{standalone: true}" placeholder="Enter remarks"></textarea>
        </div>
  
        
     
              </div>
  
  
              <div class="row">
                  <div class="col-md-9">
      
                  </div>
           
                  <div class="col-md-3">
                      <button type="button" class="btn-Create btn-full mt-5 btn-success btn" (click)="registerGeneralreq()">Add General Request</button>  
                   </div>
  
                   
              </div>
              
         
      </form>
  

        </div>

        
        <div class="white-outer-sec">


          <div class="row">

            <div class="col-md-12">
              <div class="table-scroll">
              
              <table class="styled-table" width="100%" style=" border-collapse: collapse; min-width: 1200px;">
                <thead>
                  <tr>
                    <th class="text-table-header" style="width: 0;">No</th>
                    <!-- <th class="text-table-header">Employee</th> -->
                    <th class="text-table-header">Document number</th>

                    <th class="text-table-header">Reason</th>
                    <th class="text-table-header">Request Type</th>
                    <th class="text-table-header">Remarks</th>

                    <th class="text-table-header">Status</th>

                    <!-- <th class="text-table-header">Payslip Component</th> -->
                  </tr>
                </thead>
                <tbody class="text-table-body">
                  
                  <tr class="tbodytext" *ngFor="let genreq of employeesec.requests; let i = index">
                    <td>{{ i + 1 }}</td>
                    <td>{{ genreq.document_number || '-' }}</td>
                    <td>{{ genreq.reason }}</td>
                    <td>{{ genreq.request_type }}</td>
                    <td>{{ genreq.remarks }}</td>
                    <td>{{ genreq.status }}</td>


                  </tr>
                </tbody>
              </table>
              </div>
            </div>
          </div>
          </div>

      </section>

      <section class="content-tab  animate__animated animate__fadeIn" id="assetRequest"
      *ngIf="activeTabNav === 'assetRequest'">
        <!-- Financial content here -->


         
           <div class="white-outer-sec">
                 
        <form >

            <div class="row">


<div class="col-md-6">
  <label>Document Number</label>
  <input 
    type="text" 
    class="form-control" 
    [(ngModel)]="document_number" 
    placeholder="Enter document number"
    [disabled]="automaticNumbering"
    [ngModelOptions]="{standalone: true}"
    [required]="!automaticNumbering"  
  >

  <!-- Optional: show hint when disabled -->
  <small *ngIf="automaticNumbering" class="text-muted">
    Document number will be auto-generated
  </small>
</div>



             <div class="col-md-6" >
            <label>Select Asset Type</label>
            <div class="custom-sel">
              <select
                class="form-control"
                id="asset_type"
                name="asset_type"
                [(ngModel)]="asset_type"
                [ngModelOptions]="{ standalone: true }"
              >
                <option *ngFor="let employees of AssetTypes" [value]="employees.id">
                  {{ employees.name }}
                </option>
              </select>
            </div>
          </div>


  <div class="col-md-6" >
    <label>Select Requested Asset </label>
    <div class="custom-sel">
<select
  class="form-control"
  [(ngModel)]="requested_asset"
  [ngModelOptions]="{standalone: true}"
>
  <option value="">-- Select Asset --</option>
  <option *ngFor="let asset of Assets" [value]="asset.id">
    {{ asset.name }}
  </option>
</select>
    </div>
  </div>
            
              <div class="col-md-12" >
               
                <label>Reason</label>
                
               <textarea  class="form-control" required  [(ngModel)]="reason"  placeholder="Enter reason"
                [ngModelOptions]="{standalone: true}" > </textarea>
               
          </div>

    
            </div>



          <div class="row">
              <div class="col-md-9">
  
              </div>
  
              <div class="col-md-3">
                  <button type="button" class="btn-Create btn-full mt-5 btn-success btn" (click)="CreateAssetType()">Add Asset Request</button>  
               </div>
          </div>
          
     
  </form>


        </div>


        <div class="white-outer-sec">


          <div class="row">

            <div class="col-md-12">
              <div class="table-scroll">
              
              <table class="styled-table" width="100%" style=" border-collapse: collapse; min-width: 1200px;">
                <thead>
                  <tr>
                    <th class="text-table-header" style="width: 0;">No</th>
                    <!-- <th class="text-table-header">Employee</th> -->
                    <th class="text-table-header">Document number</th>
                    <th class="text-table-header">Asset Type</th>

                    <th class="text-table-header">Reason</th>
                    <th class="text-table-header"> Requested Asset</th>

                    <th class="text-table-header">Status</th>

                    <!-- <th class="text-table-header">Payslip Component</th> -->
                  </tr>
                </thead>
                <tbody class="text-table-body">
                  
                  <tr class="tbodytext" *ngFor="let leavereq of employeesec.assets_requests; let i = index">
                    <td>{{ i + 1 }}</td>
                    <td>{{ leavereq.document_number }}</td>
                    <td>{{ leavereq.asset_type }}</td>
                    <td>{{ leavereq.reason }}</td>
                    <td>{{ leavereq.requested_asset }}</td>
                    <td>{{ leavereq.status }}</td>


                  </tr>
                </tbody>
              </table>
              </div>
            </div>
          </div>
          </div>


      </section>

      <section class="content-tab  animate__animated animate__fadeIn" id="airticketRequest"
      *ngIf="activeTabNav === 'airticketRequest'">
        <!-- Financial content here -->


         
           <div class="white-outer-sec">
                 
        <form >

          <div class="row">
             

<div class="col-md-6">
  <label>Document Number</label>
  <input 
    type="text" 
    class="form-control" 
    [(ngModel)]="document_number" 
    placeholder="Enter document number"
    [disabled]="automaticNumbering"
    [ngModelOptions]="{standalone: true}"
    [required]="!automaticNumbering"  
  >

  <!-- Optional: show hint when disabled -->
  <small *ngIf="automaticNumbering" class="text-muted">
    Document number will be auto-generated
  </small>
</div>

 <!-- <div class="col-md-3">
                <div class="custom-sel">
                    <label>Select Branches</label>
                    <select class="form-control" id="branch" required [(ngModel)]="branch" [ngModelOptions]="{standalone: true}" [ngClass]="{'error-field': registerButtonClicked && !branch}">
                        <option value="">Select</option>
                        <option *ngFor="let deparmentsec of branches" [value]="deparmentsec.id">{{ deparmentsec.branch_name }}</option>
                    </select>
                    <div *ngIf="registerButtonClicked && !branch" class="error-message">Please Select Your Branch</div>
                </div>
</div> -->

 <div class="col-md-6">

   <div class="custom-sel">
       <label>Allocation</label>
        <select class="form-control" id="allocation" required [(ngModel)]="allocation"  [ngModelOptions]="{standalone: true}"  >
           <option value="" >Select</option>
            <option *ngFor="let user of Allocations" [value]="user.id">{{ user.employee }} - {{ user.amount }}</option>
               </select>
         </div>
       </div> 

    <div class="col-md-6" >
         <label>request type</label>
             <div class="custom-sel">
                <select
                 class="form-control" [(ngModel)]="request_type" [ngModelOptions]="{ standalone: true }">
                      
               <option value="TICKET">Ticket </option>
                
              <option value="ENCASHMENT"> Encashment </option>
            
                
             </select>
             </div>
          </div>

    <div class="col-md-6" >
               
          <label> Request date</label>
          <input type="date"  class="form-control" required  [(ngModel)]="request_date"  placeholder="Enter request date"
          [ngModelOptions]="{standalone: true}" >
               
     </div>


               <div class="col-md-6" >
               
            <label>Return date</label>
           <input type="date"  class="form-control" required  [(ngModel)]="return_date"  placeholder="Enter Return date"
            [ngModelOptions]="{standalone: true}" >
           
      </div>


          <div class="col-md-6" >
               
                <label>Departure date</label>
               <input type="date"  class="form-control" required  [(ngModel)]="departure_date"  placeholder="Enter departure date"
                [ngModelOptions]="{standalone: true}" >
               
          </div>


      <div class="col-md-6" >
               
        <label>Origin</label>
       <input type="text"  class="form-control" required  [(ngModel)]="origin"  placeholder="Enter origin "
        [ngModelOptions]="{standalone: true}" >
       
  </div>


  <div class="col-md-6" >
               
    <label>Destination</label>
   <input type="text"  class="form-control" required  [(ngModel)]="destination"  placeholder="Enter destination "
    [ngModelOptions]="{standalone: true}" >
   
</div>
      
<div class="col-md-12">
    <label>Notes</label>
    <textarea class="form-control" [(ngModel)]="notes"  placeholder="Enter notes... "
    [ngModelOptions]="{standalone: true}"></textarea>
</div>

    
          </div>


          <div class="row">
              <div class="col-md-9">
  
              </div>
  
              <div class="col-md-3">
                  <button type="button" class="btn-Create btn-full mt-5 btn-success btn" (click)="SentRequest()">Add Airticket Request</button>  
               </div>
          </div>
          
     
  </form>


        </div>


        <div class="white-outer-sec">


          <div class="row">

            <div class="col-md-12">
              <div class="table-scroll">
              
              <table class="styled-table" width="100%" style=" border-collapse: collapse; min-width: 1200px;">
                <thead>
                  <tr>
                    <th class="text-table-header" style="width: 0;">No</th>
                    <!-- <th class="text-table-header">Employee</th> -->
                    <th class="text-table-header">Document Number</th>
                    <th class="text-table-header">Allocation</th>
                    <th class="text-table-header">Request type</th>
                    <th class="text-table-header">Request date</th>
                    <th class="text-table-header">Return date</th>
                    <th class="text-table-header">Departure date</th>
                    <th class="text-table-header">Origin</th>
                    <th class="text-table-header">Destination</th>
                    <th class="text-table-header">Notes</th>
                    <th class="text-table-header">Status</th>

                    <!-- <th class="text-table-header">Payslip Component</th> -->
                  </tr>
                </thead>
                <tbody class="text-table-body">
                  
                  <tr class="tbodytext" *ngFor="let leavereq of employeesec.airticket_request; let i = index">
                    <td>{{ i + 1 }}</td>
                    <td>{{ leavereq.document_number }}</td>
                    <td>{{ leavereq.allocation }}</td>
                    <td>{{ leavereq.request_type }}</td>
                    <td>{{ leavereq.request_date }}</td>
                    <td>{{ leavereq.return_date }}</td>
                    <td>{{ leavereq.departure_date }}</td>
                    <td>{{ leavereq.origin }}</td>
                    <td>{{ leavereq.destination }}</td>
                    <td>{{ leavereq.notes }}</td>
                    <td>{{ leavereq.status }}</td>



                  </tr>
                </tbody>
              </table>
              </div>
            </div>
          </div>
          </div>


      </section>

      <section class="content-tab  animate__animated animate__fadeIn" id="documentRequest"
      *ngIf="activeTabNav === 'documentRequest'">
        <!-- Financial content here -->


         
           <div class="white-outer-sec">
                 
        <form >

            <div class="row">

<div class="col-md-6">
  <label>Document Number</label>
  <input 
    type="text" 
    class="form-control" 
    [(ngModel)]="document_number" 
    placeholder="Enter document number"
    [disabled]="automaticNumbering"
    [ngModelOptions]="{standalone: true}"
    [required]="!automaticNumbering"  
  >

  <!-- Optional: show hint when disabled -->
  <small *ngIf="automaticNumbering" class="text-muted">
    Document number will be auto-generated
  </small>
</div>

        
              <div class="col-md-6">
                <label>reason</label>
                <input type="text" class="form-control" required [(ngModel)]="reason" placeholder="Enter reason"
                       [ngModelOptions]="{standalone: true}" >
              </div>

              <div class="col-md-6">
                <label>Total</label>
                <input type="number" class="form-control" required [(ngModel)]="total" placeholder="Enter total "
                       [ngModelOptions]="{standalone: true}" >
              </div>
          
              <div class="col-md-6">
                <label>Remark</label>
                <input type="text" class="form-control" required [(ngModel)]="remarks" placeholder="Enter remarks"
                       [ngModelOptions]="{standalone: true}" >
              </div>
            

              <div class="col-md-6">
                <label>Request Type</label>
                <div class="custom-sel">
                  <select class="form-control" id="request_type" name="request_type" [(ngModel)]="request_type" [ngModelOptions]="{standalone: true}">
                    <option *ngFor="let approver of DocType" [value]="approver.id">{{ approver.type_name }}</option>
                  </select>
                </div>
              </div> 
         
            </div>


          <div class="row">
              <div class="col-md-9">
  
              </div>
  
              <div class="col-md-3">
                  <button type="button" class="btn-Create btn-full mt-5 btn-success btn" (click)="SetDocApprovaLevel()">Add Document Request</button>  
               </div>
          </div>
          
     
  </form>


        </div>


        <div class="white-outer-sec">


          <div class="row">

            <div class="col-md-12">
              <div class="table-scroll">
              
              <table class="styled-table" width="100%" style=" border-collapse: collapse; min-width: 1200px;">
                <thead>
                  <tr>
                    <th class="text-table-header" style="width: 0;">No</th>
                    <!-- <th class="text-table-header">Employee</th> -->
                    <th class="text-table-header">Document number</th>
                    <th class="text-table-header">Reason</th>
                    <th class="text-table-header">Total</th>
                    <th class="text-table-header">Remarks</th>
                    <th class="text-table-header">Request type</th>
                    <th class="text-table-header">Status</th>

                    <!-- <th class="text-table-header">Payslip Component</th> -->
                  </tr>
                </thead>
                <tbody class="text-table-body">
                  
                  <tr class="tbodytext" *ngFor="let leavereq of employeesec.document_requests; let i = index">
                    <td>{{ i + 1 }}</td>
                    <td>{{ leavereq.document_number }}</td>
                    <td>{{ leavereq.reason }}</td>
                    <td>{{ leavereq.total }}</td>
                    <td>{{ leavereq.remarks }}</td>
                    <td>{{ leavereq.request_type }}</td>
                    <td>{{ leavereq.status }}</td>

                  </tr>
                </tbody>
              </table>
              </div>
            </div>
          </div>
          </div>


      </section>

      <section class="content-tab  animate__animated animate__fadeIn" id="advsalaryRequest"
      *ngIf="activeTabNav === 'advsalaryRequest'">

        <!-- Financial content here -->


         
           <div class="white-outer-sec">
         <form (ngSubmit)="SetLeaveApprovaLevel()" enctype="multipart/form-data">
                  <div class="row">
                    <div class="col-md-6">
                      <label>Document Number</label>
                      <input type="number" class="form-control" required [(ngModel)]="document_number" placeholder="Enter document number"
                             [ngModelOptions]="{standalone: true}" >
                    </div>

                    <div class="col-md-6">
                      <label>Requested amount</label>
                      <input type="number" class="form-control" required [(ngModel)]="requested_amount" placeholder="Enter requested amount"
                             [ngModelOptions]="{standalone: true}" >
                    </div>
                
                    <div class="col-md-6">
                      <label>reason</label>
                      <input type="text" class="form-control" required [(ngModel)]="reason" placeholder="Enter reason"
                             [ngModelOptions]="{standalone: true}" >
                    </div>

                  
                    <div class="col-md-6">
                      <label>Remark</label>
                      <input type="text" class="form-control" required [(ngModel)]="remarks" placeholder="Enter remarks"
                             [ngModelOptions]="{standalone: true}" >
                    </div>
                  

               
              
            

       

              


                

              
                     
               
                
               
                  </div>
                
                  <div class="row" >
                    <div class="col-md-9"></div>
                 
                 <div class="col-md-3">
                    <button type="submit" class="btn btn-success btn-full mt-4">Add Advance Salary Request</button>
                  </div>
                  </div>
                </form>

        </div>


        <div class="white-outer-sec">


          <div class="row">

            <div class="col-md-12">
              <div class="table-scroll">
              
              <table class="styled-table" width="100%" style=" border-collapse: collapse; min-width: 1200px;">
                <thead>
                  <tr>
                    <th class="text-table-header" style="width: 0;">No</th>
                    <!-- <th class="text-table-header">Employee</th> -->
                    <th class="text-table-header">Document Number</th>

                    <th class="text-table-header">Requested Amount</th>
                    <th class="text-table-header"> Remark</th>
                    <th class="text-table-header"> Reason</th>


                    <th class="text-table-header">Status</th>

                    <!-- <th class="text-table-header">Payslip Component</th> -->
                  </tr>
                </thead>
                <tbody class="text-table-body">
                  
                  <tr class="tbodytext" *ngFor="let leavereq of employeesec.advance_salary_requests; let i = index">
                    <td>{{ i + 1 }}</td>
                    <td>{{ leavereq.document_number }}</td>
                    <td>{{ leavereq.requested_amount }}</td>
                    <td>{{ leavereq.remarks }}</td>
                    <td>{{ leavereq.reason }}</td>
                    <td>{{ leavereq.status }}</td>


                  </tr>
                </tbody>
              </table>
              </div>
            </div>
          </div>
          </div>


      </section>

      <section class="content-tab  animate__animated animate__fadeIn" id="loanRequest"
      *ngIf="activeTabNav === 'loanRequest'">

        <!-- Financial content here -->

           <div class="white-outer-sec">
            <form (ngSubmit)="CreateLoanApplication()" enctype="multipart/form-data">

                <div class="row">

<div class="col-md-4">
  <label>Document Number</label>
  <input 
    type="text" 
    class="form-control" 
    [(ngModel)]="document_number" 
    placeholder="Enter document number"
    [disabled]="automaticNumbering"
    [ngModelOptions]="{standalone: true}"
    [required]="!automaticNumbering"  
  >

  <!-- Optional: show hint when disabled -->
  <small *ngIf="automaticNumbering" class="text-muted">
    Document number will be auto-generated
  </small>
</div>



                  <div class="col-md-4">
                    <label>Amount requested</label>
                    <input type="text" class="form-control" required [(ngModel)]="amount_requested" placeholder="Enter Amount requested"
                           [ngModelOptions]="{standalone: true}" >
                  </div>
              
                  <div class="col-md-4">
                    <label>Repayment period</label>
                    <input type="number" class="form-control" required [(ngModel)]="repayment_period" placeholder="Enter Repayment period"
                           [ngModelOptions]="{standalone: true}">
                  
                  </div>

                  <div class="col-md-4">
                    <label>Emi amount</label>
                    <input type="text" class="form-control" required [(ngModel)]="emi_amount" placeholder="Enter Repayment period"
                           [ngModelOptions]="{standalone: true}">
                  
                  </div>
              
               

               

                  <div class="col-md-4">
                    <label>Remaining balance</label>
                    <input type="text" class="form-control" required [(ngModel)]="remaining_balance" placeholder="Enter remaining balance"
                           [ngModelOptions]="{standalone: true}">
                  
                  </div>
              

                  <div class="col-md-4" >
                    <label>Loan Type</label>
                    <div class="custom-sel">
                      <select
                        class="form-control"
                        id="loan_type"
                        name="loan_type"
                        [(ngModel)]="loan_type"
                        [ngModelOptions]="{ standalone: true }"
                      >
                        <option *ngFor="let employees of LoanTypes" [value]="employees.id">
                          {{ employees.loan_type }}
                        </option>
                      </select>
                    </div>
                  </div>


                </div>

              

              <div class="row">
                <div class="col-md-8"></div>
                <div class="col-md-4">
                  <button type="submit" class="btn btn-success btn-full mt-4">Add Loan Request</button>
                </div>
              </div>
            </form>

        </div>


        <div class="white-outer-sec">


          <div class="row">

            <div class="col-md-12">
              <div class="table-scroll">
              
              <table class="styled-table" width="100%" style=" border-collapse: collapse; min-width: 1200px;">
                <thead>
                  <tr>
                    <th class="text-table-header" style="width: 0;">No</th>
                    <!-- <th class="text-table-header">Employee</th> -->
         
                    <th class="text-table-header"> document number</th>
                    <th class="text-table-header"> Amount Requested</th>
                    <th class="text-table-header"> emi amount</th>
                    <th class="text-table-header">  loan type</th>
                    <th class="text-table-header">  remaining balance</th>
                    <th class="text-table-header">  repayment period</th>



                    <th class="text-table-header">Status</th>

                    <!-- <th class="text-table-header">Payslip Component</th> -->
                  </tr>
                </thead>
                <tbody class="text-table-body">
                  
                  <tr class="tbodytext" *ngFor="let leavereq of employeesec.loan_requests; let i = index">
                    <td>{{ i + 1 }}</td>
                    <td>{{ leavereq.document_number }}</td>
                    <td>{{ leavereq.amount_requested }}</td>
                    <td>{{ leavereq.emi_amount }}</td>
                    <td>{{ leavereq.loan_type }}</td>
                    <td>{{ leavereq.remaining_balance }}</td>
                    <td>{{ leavereq.repayment_period }}</td>
                    <td>{{ leavereq.status }}</td>
                  </tr>
                </tbody>
              </table>
              </div>
            </div>
          </div>
          </div>


      </section>

      <section class="content-tab  animate__animated animate__fadeIn" id="resignationRequest"
      *ngIf="activeTabNav === 'resignationRequest'">

        <!-- Financial content here -->


         
           <div class="white-outer-sec">
            <form (ngSubmit)="SetEmployeeResignation()" enctype="multipart/form-data">
              <div class="row">
  
                
                <div class="col-md-6">
                  <label>Document date</label>
                  <input type="date" class="form-control" required [(ngModel)]="document_date" placeholder="Enter document date"
                         [ngModelOptions]="{standalone: true}" >
                </div>
  
                <div class="col-md-6">
                  <label> resigned on</label>
                  <input type="date" class="form-control" required [(ngModel)]="resigned_on" placeholder="Enter resigned on"
                         [ngModelOptions]="{standalone: true}" >
                </div>
            
                <div class="col-md-6">
                  <label>notice period</label>
                  <input type="number" class="form-control" required [(ngModel)]="notice_period" placeholder="Enter notice period"
                         [ngModelOptions]="{standalone: true}" >
                </div>
  
              
                <div class="col-md-6">
                  <label>last working date</label>
                  <input type="date" class="form-control" required [(ngModel)]="last_working_date" placeholder="Enter last working date"
                         [ngModelOptions]="{standalone: true}" >
                </div>
              
  
                <div class="col-md-6">
                  <label>location</label>
                  <input type="text" class="form-control" required [(ngModel)]="location" placeholder="Enter location"
                         [ngModelOptions]="{standalone: true}" >
                </div>
              
  
              
                <div class="col-md-6">
                  <label>Type</label>
                  <div class="custom-sel">
                    <select class="form-control" id="termination_type" name="termination_type" [(ngModel)]="termination_type" [ngModelOptions]="{standalone: true}">
                      <option  value="resignation" >Resignation</option>
                      <option  value="termination" >Termination</option>
  
                      <option  value="retirement" >Retirement</option>
  
                      <option  value="death_or_disablement" >Death or Disablement</option>
                      
                    </select>
                  </div>
                </div>
                
        
                <div class="col-md-12">
                  <label>Reason</label>
                  <textarea class="form-control" [(ngModel)]="reason_for_leaving" placeholder="Enter reason for leaving"></textarea>
                </div>
  
   
          
           
                
  
  
            
  
          
                 
           
            
           
              </div>
            
              <div class="row" >
                <div class="col-md-9"></div>
                <div class="col-md-3">
                  <button type="submit" class="btn btn-success btn-full mt-4">Add Resignation Request</button>
                </div>
              </div>
            </form>
  
        </div>


        <div class="white-outer-sec">


          <div class="row">

            <div class="col-md-12">
              <div class="table-scroll">
              
              <table class="styled-table" width="100%" style=" border-collapse: collapse; min-width: 1200px;">
                <thead>
                  <tr>
                    <th class="text-table-header" style="width: 0;">No</th>
                    <!-- <th class="text-table-header">Employee</th> -->
         
                    <th class="text-table-header"> Document date</th>
                    <th class="text-table-header"> Resigned on</th>
                    <th class="text-table-header"> Notice period</th>
                    <th class="text-table-header"> Last working date</th>
                    <th class="text-table-header"> Location</th>
                    <th class="text-table-header"> Type</th>
                    <th class="text-table-header"> Reason</th>
                    <th class="text-table-header">Status</th>

                    <!-- <th class="text-table-header">Payslip Component</th> -->
                  </tr>
                </thead>
                <tbody class="text-table-body">
                  
                  <tr class="tbodytext" *ngFor="let leavereq of employeesec.resignation_requests; let i = index">
                    <td>{{ i + 1 }}</td>
                    <td>{{ leavereq.document_date }}</td>
                    <td>{{ leavereq.resigned_on }}</td>
                    <td>{{ leavereq.notice_period }}</td>
                    <td>{{ leavereq.last_working_date }}</td>
                    <td>{{ leavereq.location }}</td>
                    <td>{{ leavereq.termination_type }}</td>
                    <td>{{ leavereq.reason }}</td>
                    <td>{{ leavereq.status }}</td>






                  </tr>
                </tbody>
              </table>
              </div>
            </div>
          </div>
          </div>
       


      </section>



<!-- Employee Punching section -->


      <section class="content-tab  animate__animated animate__fadeIn" id="punching"
      *ngIf="activeTabNav === 'punching'">

        <!-- Financial content here -->


         
           <div class="white-outer-sec">

            <div class="row">
              <div class="col-md-6">
                <form (ngSubmit)="EmployeePunching()">
                  <div class="row">
                    <div class="col-md-12">
                      <button type="submit" class="btn btn-success btn-full mt-4" [disabled]="isLoading">
                        <span *ngIf="!isLoading">Check-In</span>
                        <span *ngIf="isLoading">
                          <span class="spinner-border spinner-border-sm mr-1"></span>
                          Finding Location...
                        </span>
                      </button>
                    </div>
                  </div>
                </form>
      
              </div>


              <div class="col-md-6">

                <form (ngSubmit)="EmployeePunchingOut()">
                  <div class="row">
                    <div class="col-md-12">
                      <button type="submit" class="btn btn-danger btn-full mt-4" [disabled]="isLoadingout">
                        <span *ngIf="!isLoadingout">Check-Out</span>
                        <span *ngIf="isLoadingout">
                          <span class="spinner-border spinner-border-sm mr-1"></span>
                          loading...
                        </span>
                      </button>
                    </div>
                  </div>
                </form>
      
                
              </div>
            </div>
         
        </div>


       


      </section>



      <section class="content-tab  animate__animated animate__fadeIn" id="recheckemp"
      *ngIf="activeTabNav === 'recheckemp'">

        <!-- Financial content here -->


         
           <div class="white-outer-sec">
            <form (ngSubmit)="recheckEmployee()" enctype="multipart/form-data">
              
            
              <div class="row" >
              
                <div class="col-md-3">
                  <button type="submit" class="btn btn-success btn-full mt-4">Re Check-In</button>
                </div>
              </div>
            </form>
  
        </div>


       


      </section>








      <!-- approvals section here -->


      
      <section class="content-tab  animate__animated animate__fadeIn" id="Genapproval"
      *ngIf="activeTabNav === 'Genapproval'">

        <!-- Financial content here -->


         
           <div class="white-outer-sec">
            <div class="row">
              <div class="col-md-12">
                <div class="approval_sec" *ngFor="let apr of Approvals" >
                  <h6>General Request Approvals</h6><hr>
                  <div class="row ">
                      <div class="col-md-4">
                        <h4>General Request Number</h4>
                        <h5>{{apr.general_request}}</h5>
                      </div>
                      <div class="col-md-2">
                        <h4>Status  </h4>
                        <h5>{{apr.status}} </h5>
                      </div>
                      <div class="col-md-2">
                        <h4>Level </h4>
                        <h5>{{apr.level}}</h5>
                      </div>
                      <div class="col-md-2">
                          <h4>Comment </h4>
                          <h5>{{apr.note}}</h5>
                        </div>
                      <div class="col-md-2">
                          <button type="button" class="btn pull-right" (click)="selectedaprovaldetalis(apr.id)">View</button>
                      </div>
                    </div>
                
           
                  <!-- <h6> General Request - {{apr.general_request}}</h6>
                  <h6>Status - {{apr.status}}</h6>
                  <h6>Level - {{apr.level}}</h6> -->
          
              
          
                </div>
              </div>
            </div>
  
  
  
            <!-- Modal Popup for selected approval details -->
  <div *ngIf="isAddFieldsModalOpen" class="modal">
  
      <div class="modal-content">
        <span class="close pull-right" (click)="closemarketModal()">&times;</span>
    
        <div *ngIf="selectedApproval">
          <h6>General Request Approvals</h6><hr>
          <h6> General Request - {{selectedApproval.general_request}}</h6>
          <h6>Status - {{selectedApproval.status}}</h6>
          <h6>Level - {{selectedApproval.level}}</h6>
    
    
        <textarea class="form-control" [(ngModel)]="note" placeholder="Add a Comment here..."  [ngModelOptions]="{standalone: true}"></textarea>
    
          <div class="row mt-2">
            <div class="col-md-6"></div>
            <div class="col-md-3">
              <button type="button" class="btn btn btn-danger btn-full" (click)="rejectApproval(selectedApproval.id)">Reject</button>
            </div>
            <div class="col-md-3">
              <button type="button" class="btn btn-success btn-full" (click)="approveApproval(selectedApproval.id)">Approve</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    
         
        </div>


       


      </section>

      <section class="content-tab  animate__animated animate__fadeIn" id="Resignationapproval"
      *ngIf="activeTabNav === 'Resignationapproval'">

  


         
           <div class="white-outer-sec">
            <div class="row">
              <div class="col-md-12">
              <div class="approval_sec" *ngFor="let apr of ResApprovals" >
                <h6>Employee Resignation Request Approvals</h6><hr>
                <div class="row ">
                    <div class="col-md-3">
                      <h4>Resignation Request</h4>
                      <h5>{{apr.resignation_request}}</h5>
                    </div>
                    <div class="col-md-2">
                      <h4>Status  </h4>
                      <h5>{{apr.status}} </h5>
                    </div>
                    <div class="col-md-2">
                      <h4>Level </h4>
                      <h5>{{apr.level}}</h5>
                    </div>
                    <div class="col-md-2">
                        <h4>Reason </h4>
                        <h5>{{apr.note}}</h5>
                      </div>
                    <div class="col-md-2" *ngIf="hasAddPermission">
                        <button type="button" class="btn pull-right" (click)="selectedResiaprovaldetalis(apr.id)">View</button>
                    </div>
                  </div>
              

        
            
        
              </div>
              </div>
            </div>
  
  
  
        
<div *ngIf="isAddFieldsModalOpen" class="modal">
    <div class="modal-content">
      <span class="close pull-right" (click)="closemarketModal()">&times;</span>
  
      <div *ngIf="selectedApproval">
        <h6>Resignation Request Approvals</h6>
        <hr>
        <h6>Resignation Request - {{ selectedApproval.general_request }}</h6>
        <h6>Status - {{ selectedApproval.status }}</h6>
        <h6>Level - {{ selectedApproval.level }}</h6>

        <textarea
          class="form-control"
          [(ngModel)]="note"
          placeholder="Add a Comment here..."
          [ngModelOptions]="{ standalone: true }"
        >  
      </textarea>

   
  
        <div class="row mt-2">
          <div class="col-md-6"></div>
          <div class="col-md-3">
            <button
              type="button"
              class="btn btn btn-danger btn-full"
              (click)="showRejectionReason = true"
            >
              Reject
            </button>
          </div>
          <div class="col-md-3">
            <button
              type="button"
              class="btn btn-success btn-full"
              (click)="approveResApproval(selectedApproval.id)"
            >
              Approve
            </button>
          </div>
        </div>
             
        <div *ngIf="showRejectionReason">
          <textarea
            class="form-control mt-2"
            [(ngModel)]="rejection_reason"
            placeholder="Add a Rejection Reason..."
            [ngModelOptions]="{ standalone: true }"
          ></textarea>


        </div>
        <div class="mt-2" *ngIf="showRejectionReason">
          <button
            type="button"
            class="btn btn-danger btn-full"
            (click)="confirmResRejection(selectedApproval.id)"
          >
            Confirm Rejection
          </button>
        </div>
      </div>
    </div>
  </div>
    
         
        </div>


       


      </section>

      <section class="content-tab  animate__animated animate__fadeIn" id="Leaveapproval"
      *ngIf="activeTabNav === 'Leaveapproval'">

  


         
           <div class="white-outer-sec">
        <div class="row">
            <div class="col-md-12">
              <div class="approval_sec" *ngFor="let apr of LeaveApprovals" >
                <h6>Leave Request Approvals</h6><hr>
                <div class="row ">
                    <div class="col-md-2">
                      <h4>Leave Request</h4>
                      <h5>{{apr.leave_request}}</h5>
                    </div>
                       <div class="col-md-2">
                      <h4>Employee</h4>
                      <h5>{{apr.employee_id}}</h5>
                    </div>
                    <div class="col-md-2">
                      <h4>Status  </h4>
                      <h5>{{apr.status}} </h5>
                    </div>
                    <div class="col-md-2">
                      <h4>Level </h4>
                      <h5>{{apr.level}}</h5>
                    </div>
                    <div class="col-md-2">
                        <h4>Reason </h4>
                        <h5>{{apr.note}}</h5>
                      </div>
                    <div class="col-md-2">
                        <button type="button" class="btn pull-right" (click)="selectedLeaveaprovaldetalis(apr.id)">View</button>
                    </div>
                  </div>
              
         
                <!-- <h6> General Request - {{apr.general_request}}</h6>
                <h6>Status - {{apr.status}}</h6>
                <h6>Level - {{apr.level}}</h6> -->
        
            
        
              </div>
            </div>
          </div>
  
  
  
        
<div *ngIf="isAddFieldsModalOpen" class="modal">
    <div class="modal-content">
      <span class="close pull-right" (click)="closemarketModal()">&times;</span>
  
      <div *ngIf="selectedApproval">
        <h6>Leave Request Approvals</h6>
        <hr>
        <h6>Leave Request - {{ selectedApproval.leave_request }}</h6>
        <h6>Status - {{ selectedApproval.status }}</h6>
        <h6>Level - {{ selectedApproval.level }}</h6>
  
        <textarea
          class="form-control"
          [(ngModel)]="note"
          placeholder="Add a Comment here..."
          [ngModelOptions]="{ standalone: true }"
        >  </textarea>
  
   
  
        <div class="row mt-2">
          <div class="col-md-6"></div>
          <div class="col-md-3">
            <button
              type="button"
              class="btn btn btn-danger btn-full"
              (click)="showRejectionReason = true"
            >
              Reject
            </button>
          </div>
          <div class="col-md-3">
            <button
              type="button"
              class="btn btn-success btn-full"
              (click)="approveLeaveApproval(selectedApproval.id)"
            >
              Approve
            </button>
          </div>
        </div>
             <!-- Additional input for rejection reason -->
        <div *ngIf="showRejectionReason">
          <textarea
            class="form-control mt-2"
            [(ngModel)]="rejection_reason"
            placeholder="Add a Rejection Reason..."
            [ngModelOptions]="{ standalone: true }"
          ></textarea>
        </div>
        <div class="mt-2" *ngIf="showRejectionReason">
          <button
            type="button"
            class="btn btn-danger btn-full"
            (click)="confirmLeaveRejection(selectedApproval.id)"
          >
            Confirm Rejection
          </button>
        </div>
      </div>
    </div>
  </div>
    
         
        </div>


       


      </section>

     <section class="content-tab  animate__animated animate__fadeIn" id="Advsalapproval"
      *ngIf="activeTabNav === 'Advsalapproval'">

  


         
           <div class="white-outer-sec">
        <div class="row">
            <div class="col-md-12">
              <div class="approval_sec" *ngFor="let apr of AdvSalApprovals" >
                <h6>Advance Salary Request Approvals</h6><hr>
                <div class="row ">
                    <div class="col-md-2">
                      <h4> Request</h4>
                      <h5>{{apr.request}}</h5>
                    </div>
                       <div class="col-md-2">
                      <h4>Employee</h4>
                      <h5>{{apr.employee}}</h5>
                    </div>
                    <div class="col-md-2">
                      <h4>Status  </h4>
                      <h5>{{apr.status}} </h5>
                    </div>
                    <div class="col-md-2">
                      <h4>Level </h4>
                      <h5>{{apr.level}}</h5>
                    </div>
                    <div class="col-md-2">
                        <h4>Reason </h4>
                        <h5>{{apr.note}}</h5>
                      </div>
                    <div class="col-md-2">
                        <button type="button" class="btn pull-right" (click)="selectedAdvSalaprovaldetalis(apr.id)">View</button>
                    </div>
                  </div>
              </div>
            </div>
          </div>
  
  
  
        
<div *ngIf="isAddFieldsModalOpen" class="modal">
    <div class="modal-content">
      <span class="close pull-right" (click)="closemarketModal()">&times;</span>
  
      <div *ngIf="selectedApproval">
        <h6>Advance Salary Request Approvals</h6>
        <hr>
        <h6>Advance Salary Request - {{ selectedApproval.request }}</h6>
        <h6>Status - {{ selectedApproval.status }}</h6>
        <h6>Level - {{ selectedApproval.level }}</h6>
  
        <textarea
          class="form-control"
          [(ngModel)]="note"
          placeholder="Add a Comment here..."
          [ngModelOptions]="{ standalone: true }"
        >  </textarea>
  
   
  
        <div class="row mt-2">
          <div class="col-md-6"></div>
          <div class="col-md-3">
            <button
              type="button"
              class="btn btn btn-danger btn-full"
              (click)="showRejectionReason = true"
            >
              Reject
            </button>
          </div>
          <div class="col-md-3">
            <button
              type="button"
              class="btn btn-success btn-full"
              (click)="approveAdvsalApproval(selectedApproval.id)"
            >
              Approve
            </button>
          </div>
        </div>
             <!-- Additional input for rejection reason -->
        <div *ngIf="showRejectionReason">
          <textarea
            class="form-control mt-2"
            [(ngModel)]="rejection_reason"
            placeholder="Add a Rejection Reason..."
            [ngModelOptions]="{ standalone: true }"
          ></textarea>
        </div>
        <div class="mt-2" *ngIf="showRejectionReason">
          <button
            type="button"
            class="btn btn-danger btn-full"
            (click)="confirmAdvSalRejection(selectedApproval.id)"
          >
            Confirm Rejection
          </button>
        </div>
      </div>
    </div>
  </div>
    
         
        </div>


       


      </section>

      <section class="content-tab  animate__animated animate__fadeIn" id="Loanapproval"
      *ngIf="activeTabNav === 'Loanapproval'">

  


         
           <div class="white-outer-sec">
        <div class="row">
            <div class="col-md-12">
              <div class="approval_sec" *ngFor="let apr of LoanApprovals" >
                <h6>Loan Request Approvals</h6><hr>
                <div class="row ">
                    <div class="col-md-2">
                      <h4>Loan Request</h4>
                      <h5>{{apr.loan_request}}</h5>
                    </div>
                       <div class="col-md-2">
                      <h4>Employee</h4>
                      <h5>{{apr.employee_id}}</h5>
                    </div>
                    <div class="col-md-2">
                      <h4>Status  </h4>
                      <h5>{{apr.status}} </h5>
                    </div>
                    <div class="col-md-2">
                      <h4>Level </h4>
                      <h5>{{apr.level}}</h5>
                    </div>
                    <div class="col-md-2">
                        <h4>Reason </h4>
                        <h5>{{apr.note}}</h5>
                      </div>
                    <div class="col-md-2">
                        <button type="button" class="btn pull-right" (click)="selectedloanaprovaldetalis(apr.id)">View</button>
                    </div>
                  </div>
              
         

        
            
        
              </div>
            </div>
          </div>
  
  
  
        
<div *ngIf="isAddFieldsModalOpen" class="modal">
    <div class="modal-content">
      <span class="close pull-right" (click)="closemarketModal()">&times;</span>
  
      <div *ngIf="selectedApproval">
        <h6>Loan Request Approvals</h6>
        <hr>
        <h6>Loan Request - {{ selectedApproval.loan_request }}</h6>
        <h6>Status - {{ selectedApproval.status }}</h6>
        <h6>Level - {{ selectedApproval.level }}</h6>
  
        <textarea
          class="form-control"
          [(ngModel)]="note"
          placeholder="Add a Comment here..."
          [ngModelOptions]="{ standalone: true }"
        >  </textarea>
  
   
  
        <div class="row mt-2">
          <div class="col-md-6"></div>
          <div class="col-md-3">
            <button
              type="button"
              class="btn btn btn-danger btn-full"
              (click)="showRejectionReason = true"
            >
              Reject
            </button>
          </div>
          <div class="col-md-3">
            <button
              type="button"
              class="btn btn-success btn-full"
              (click)="approveLoanApproval(selectedApproval.id)"
            >
              Approve
            </button>
          </div>
        </div>
             <!-- Additional input for rejection reason -->
        <div *ngIf="showRejectionReason">
          <textarea
            class="form-control mt-2"
            [(ngModel)]="rejection_reason"
            placeholder="Add a Rejection Reason..."
            [ngModelOptions]="{ standalone: true }"
          ></textarea>

          <!-- <div class="col-md-12">
            <label>Leave Type</label>
            <div class="custom-sel">
              <select class="form-control" id="rejection_reason" name="rejection_reason" [(ngModel)]="rejection_reason" [ngModelOptions]="{standalone: true}">
                <option *ngFor="let rejectionReason of RejectionResons" [value]="rejectionReason.id">{{ rejectionReason.reason_text }}</option>
              </select>
            </div>
          </div> -->

        </div>
        <div class="mt-2" *ngIf="showRejectionReason">
          <button
            type="button"
            class="btn btn-danger btn-full"
            (click)="confirmLoanRejection(selectedApproval.id)"
          >
            Confirm Rejection
          </button>
        </div>
      </div>
    </div>
  </div>
    
         
        </div>


       


      </section>

      <section class="content-tab  animate__animated animate__fadeIn" id="Assetapproval"
      *ngIf="activeTabNav === 'Assetapproval'">

  


         
           <div class="white-outer-sec">
        <div class="row">
            <div class="col-md-12">
              <div class="approval_sec" *ngFor="let apr of AssetApprovals" >
                <h6>Asset Request Approvals</h6><hr>
                <div class="row ">
                    <div class="col-md-2">
                      <h4>Asset Request</h4>
                      <h5>{{apr.asset_request}}</h5>
                    </div>
                       <div class="col-md-2">
                      <h4>Approver</h4>
                      <h5>{{apr.approver}}</h5>
                    </div>
                    <div class="col-md-2">
                      <h4>Status  </h4>
                      <h5>{{apr.status}} </h5>
                    </div>
                    <div class="col-md-2">
                      <h4>Level </h4>
                      <h5>{{apr.level}}</h5>
                    </div>
                    <div class="col-md-2">
                        <h4>Reason </h4>
                        <h5>{{apr.note}}</h5>
                      </div>
                    <div class="col-md-2">
                        <button type="button" class="btn pull-right" (click)="selectedassetaprovaldetalis(apr.id)">View</button>
                    </div>
                  </div>
              
         
        
            
        
              </div>
            </div>
          </div>
  
  
  
        
<div *ngIf="isAddFieldsModalOpen" class="modal">
    <div class="modal-content">
      <span class="close pull-right" (click)="closemarketModal()">&times;</span>
  
      <div *ngIf="selectedApproval">
        <h6>Asset Request Approvals</h6>
        <hr>
        <h6>Asset Request - {{ selectedApproval.asset_request }}</h6>
        <h6>Status - {{ selectedApproval.status }}</h6>
        <h6>Level - {{ selectedApproval.level }}</h6>
  
        <textarea
          class="form-control"
          [(ngModel)]="note"
          placeholder="Add a Comment here..."
          [ngModelOptions]="{ standalone: true }"
        >  </textarea>
  
   
  
        <div class="row mt-2" *ngIf="hasAddPermission">
          <div class="col-md-6"></div>
          <div class="col-md-3">
            <button
              type="button"
              class="btn btn btn-danger btn-full"
              (click)="showRejectionReason = true"
            >
              Reject
            </button>
          </div>
          <div class="col-md-3">
            <button
              type="button"
              class="btn btn-success btn-full"
              (click)="approveAssetApproval(selectedApproval.id)"
            >
              Approve
            </button>
          </div>
        </div>
             <!-- Additional input for rejection reason -->
        <div *ngIf="showRejectionReason">
          <textarea
            class="form-control mt-2"
            [(ngModel)]="rejection_reason"
            placeholder="Add a Rejection Reason..."
            [ngModelOptions]="{ standalone: true }"
          ></textarea>


        </div>
        <div class="mt-2" *ngIf="showRejectionReason">
          <button
            type="button"
            class="btn btn-danger btn-full"
            (click)="confirmAssetRejection(selectedApproval.id)"
          >
            Confirm Rejection
          </button>
        </div>
      </div>
    </div>
  </div>
    
         
        </div>


       


      </section>

      <section class="content-tab  animate__animated animate__fadeIn" id="Airticketapproval"
      *ngIf="activeTabNav === 'Airticketapproval'">

  


         
           <div class="white-outer-sec">
        <div class="row">
            <div class="col-md-12">
              <div class="approval_sec" *ngFor="let apr of AirticketApprovals" >
                <h6>Airticket Request Approvals</h6><hr>
                <div class="row ">
                    <div class="col-md-2">
                      <h4>Airticket Request</h4>
                      <h5>{{apr.request}}</h5>
                    </div>
                       <div class="col-md-2">
                      <h4>Approver</h4>
                      <h5>{{apr.approver}}</h5>
                    </div>
                     <div class="col-md-2">
                      <h4>Employee</h4>
                      <h5>{{apr.employee}}</h5>
                    </div>
                    <div class="col-md-2">
                      <h4>Status  </h4>
                      <h5>{{apr.status}} </h5>
                    </div>
                    <div class="col-md-1">
                      <h4>Level </h4>
                      <h5>{{apr.level}}</h5>
                    </div>
                    <div class="col-md-2">
                        <h4>Reason </h4>
                        <h5>{{apr.note}}</h5>
                      </div>
                    <div class="col-md-1">
                        <button type="button" class="btn pull-right" (click)="selectedAiraprovaldetalis(apr.id)">View</button>
                    </div>
                  </div>
              
         
        
            
        
              </div>
            </div>
          </div>
  
  
  
        
<div *ngIf="isAddFieldsModalOpen" class="modal">
    <div class="modal-content">
      <span class="close pull-right" (click)="closemarketModal()">&times;</span>
  
      <div *ngIf="selectedApproval">
        <h6>Airticket Request Approvals</h6>
        <hr>
        <h6>Airticket Request - {{ selectedApproval.request }}</h6>
        <h6>Status - {{ selectedApproval.status }}</h6>
        <h6>Level - {{ selectedApproval.level }}</h6>
  
        <textarea
          class="form-control"
          [(ngModel)]="note"
          placeholder="Add a Comment here..."
          [ngModelOptions]="{ standalone: true }"
        >  </textarea>
  
   
  
        <div class="row mt-2" *ngIf="hasAddPermission">
          <div class="col-md-6"></div>
          <div class="col-md-3">
            <button
              type="button"
              class="btn btn btn-danger btn-full"
              (click)="showRejectionReason = true"
            >
              Reject
            </button>
          </div>
          <div class="col-md-3">
            <button
              type="button"
              class="btn btn-success btn-full"
              (click)="approveAirticketApproval(selectedApproval.id)"
            >
              Approve
            </button>
          </div>
        </div>
             <!-- Additional input for rejection reason -->
        <div *ngIf="showRejectionReason">
          <textarea
            class="form-control mt-2"
            [(ngModel)]="rejection_reason"
            placeholder="Add a Rejection Reason..."
            [ngModelOptions]="{ standalone: true }"
          ></textarea>


        </div>
        <div class="mt-2" *ngIf="showRejectionReason">
          <button
            type="button"
            class="btn btn-danger btn-full"
            (click)="confirmAirtickRejection(selectedApproval.id)"
          >
            Confirm Rejection
          </button>
        </div>
      </div>
    </div>
  </div>
    
         
        </div>


       


      </section>

      <section class="content-tab  animate__animated animate__fadeIn" id="Docapproval"
      *ngIf="activeTabNav === 'Docapproval'">

  


         
           <div class="white-outer-sec">
        <div class="row">
            <div class="col-md-12">
              <div class="approval_sec" *ngFor="let apr of DocApprovals" >
                <h6>Document Request Approvals</h6><hr>
                <div class="row ">
                    <div class="col-md-2">
                      <h4>General Request</h4>
                      <h5>{{apr.general_request}}</h5>
                    </div>
                       <div class="col-md-2">
                      <h4>Approver</h4>
                      <h5>{{apr.approver}}</h5>
                    </div>
                    <div class="col-md-2">
                      <h4>Status  </h4>
                      <h5>{{apr.status}} </h5>
                    </div>
                    <div class="col-md-2">
                      <h4>Level </h4>
                      <h5>{{apr.level}}</h5>
                    </div>
                    <div class="col-md-2">
                        <h4>Reason </h4>
                        <h5>{{apr.note}}</h5>
                      </div>
                    <div class="col-md-2">
                        <button type="button" class="btn pull-right" (click)="selectedDocaprovaldetalis(apr.id)" *ngIf="hasAddPermission">View</button>
                    </div>
                  </div>
              
         
                <!-- <h6> General Request - {{apr.general_request}}</h6>
                <h6>Status - {{apr.status}}</h6>
                <h6>Level - {{apr.level}}</h6> -->
        
            
        
              </div>
            </div>
          </div>
  
  
  
        
<div *ngIf="isAddFieldsModalOpen" class="modal">
    <div class="modal-content">
      <span class="close pull-right" (click)="closemarketModal()">&times;</span>
  
      <div *ngIf="selectedApproval">
        <h6>Document Request Approvals</h6>
        <hr>
        <h6>Document Request - {{ selectedApproval.general_request }}</h6>
        <h6>Status - {{ selectedApproval.status }}</h6>
        <h6>Level - {{ selectedApproval.level }}</h6>
        <h6>Reason - {{ selectedApproval.note }}</h6>
  
        <textarea
          class="form-control"
          [(ngModel)]="note"
          placeholder="Add a Comment here..."
          [ngModelOptions]="{ standalone: true }"
        >  </textarea>
  
   
  
        <div class="row mt-2">
          <div class="col-md-6"></div>
          <div class="col-md-3">
            <button
              type="button"
              class="btn btn btn-danger btn-full"
              (click)="showRejectionReason = true"
            >
              Reject
            </button>
          </div>
          <div class="col-md-3">
            <button
              type="button"
              class="btn btn-success btn-full"
              (click)="approveDocApproval(selectedApproval.id)"
            >
              Approve
            </button>
          </div>
        </div>
             <!-- Additional input for rejection reason -->
        <div *ngIf="showRejectionReason">
          <textarea
            class="form-control mt-2"
            [(ngModel)]="rejection_reason"
            placeholder="Add a Rejection Reason..."
            [ngModelOptions]="{ standalone: true }"
          ></textarea>

          <!-- <div class="col-md-12">
            <label>Leave Type</label>
            <div class="custom-sel">
              <select class="form-control" id="rejection_reason" name="rejection_reason" [(ngModel)]="rejection_reason" [ngModelOptions]="{standalone: true}">
                <option *ngFor="let rejectionReason of RejectionResons" [value]="rejectionReason.id">{{ rejectionReason.reason_text }}</option>
              </select>
            </div>
          </div> -->

        </div>
        <div class="mt-2" *ngIf="showRejectionReason">
          <button
            type="button"
            class="btn btn-danger btn-full"
            (click)="confirmDocRejection(selectedApproval.id)"
          >
            Confirm Rejection
          </button>
        </div>
      </div>
    </div>
  </div>
    
         
        </div>


       


      </section>

      





    </main>
  </div>
</div>